<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Helper types for tests."><title>linera_views::test_utils - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="linera_views" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../static.files/storage-3a5871a4.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../linera_views/index.html">linera_<wbr>views</a><span class="version">0.16.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module test_<wbr>utils</a></h2><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate linera_<wbr>views</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">linera_views</a></div><h1>Module <span>test_utils</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/linera_views/test_utils/mod.rs.html#4-909">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Helper types for tests.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="mod" href="performance/index.html" title="mod linera_views::test_utils::performance">performance</a></dt><dd>Functions for computing the performance of stores.</dd><dt><a class="mod" href="test_views/index.html" title="mod linera_views::test_utils::test_views">test_<wbr>views</a></dt><dd>Some <a href="../views/trait.View.html" title="trait linera_views::views::View"><code>View</code></a>s that are easy to use with test cases.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="constant" href="constant.SMALL_BYTE_UPPER_LIMIT.html" title="constant linera_views::test_utils::SMALL_BYTE_UPPER_LIMIT">SMALL_<wbr>BYTE_<wbr>UPPER_<wbr>LIMIT</a></dt><dd>The size of the small value used for tests.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="fn" href="fn.access_admin_test.html" title="fn linera_views::test_utils::access_admin_test">access_<wbr>admin_<wbr>test</a></dt><dd>Both checks together.</dd><dt><a class="fn" href="fn.add_prefix.html" title="fn linera_views::test_utils::add_prefix">add_<wbr>prefix</a></dt><dd>Adds a prefix to a list of key-values</dd><dt><a class="fn" href="fn.big_read_multi_values.html" title="fn linera_views::test_utils::big_read_multi_values">big_<wbr>read_<wbr>multi_<wbr>values</a></dt><dd>Reading many keys at a time could trigger an error. This needs to be tested.</dd><dt><a class="fn" href="fn.exclusive_access_admin_test.html" title="fn linera_views::test_utils::exclusive_access_admin_test">exclusive_<wbr>access_<wbr>admin_<wbr>test</a></dt><dd>A store can be in exclusive access where it stores the absence of values
or in shared access where only values are stored and (key, value) once
written are never modified nor erased.</dd><dt><a class="fn" href="fn.get_random_byte_vector.html" title="fn linera_views::test_utils::get_random_byte_vector">get_<wbr>random_<wbr>byte_<wbr>vector</a></dt><dd>Takes a random number generator, a <code>key_prefix</code> and extends it by n random bytes.</dd><dt><a class="fn" href="fn.get_random_key_prefix.html" title="fn linera_views::test_utils::get_random_key_prefix">get_<wbr>random_<wbr>key_<wbr>prefix</a></dt><dd>Returns a random key prefix used for tests</dd><dt><a class="fn" href="fn.get_random_key_value_operations.html" title="fn linera_views::test_utils::get_random_key_value_operations">get_<wbr>random_<wbr>key_<wbr>value_<wbr>operations</a></dt><dd>A bunch of puts and some deletes.</dd><dt><a class="fn" href="fn.get_random_key_values.html" title="fn linera_views::test_utils::get_random_key_values">get_<wbr>random_<wbr>key_<wbr>values</a></dt><dd>Takes a random number generator <code>rng</code>, a number n and returns n random <code>(key, value)</code>
which are all distinct with key and value being of length 8.</dd><dt><a class="fn" href="fn.get_random_key_values_prefix.html" title="fn linera_views::test_utils::get_random_key_values_prefix">get_<wbr>random_<wbr>key_<wbr>values_<wbr>prefix</a></dt><dd>Takes a random number generator, a <code>key_prefix</code> and generates
pairs <code>(key, value)</code> with key obtained by appending <code>len_key</code> random bytes to <code>key_prefix</code>
and value obtained by creating a vector with <code>len_value</code> random bytes.
We return n such <code>(key, value)</code> pairs which are all distinct.</dd><dt><a class="fn" href="fn.get_random_key_values_with_sizes.html" title="fn linera_views::test_utils::get_random_key_values_with_sizes">get_<wbr>random_<wbr>key_<wbr>values_<wbr>with_<wbr>sizes</a></dt><dd>Generates a list of random key-values with no duplicates</dd><dt><a class="fn" href="fn.get_random_kset.html" title="fn linera_views::test_utils::get_random_kset">get_<wbr>random_<wbr>kset</a></dt><dd>Builds a random k element subset of n</dd><dt><a class="fn" href="fn.get_random_test_scenarios.html" title="fn linera_views::test_utils::get_random_test_scenarios">get_<wbr>random_<wbr>test_<wbr>scenarios</a></dt><dd>We build a number of scenarios for testing the reads.</dd><dt><a class="fn" href="fn.namespace_admin_test.html" title="fn linera_views::test_utils::namespace_admin_test">namespace_<wbr>admin_<wbr>test</a></dt><dd>Exercises the namespace functionalities of the <code>KeyValueDatabase</code>.
This tests everything except the <code>delete_all</code> which would
interact with other namespaces.</dd><dt><a class="fn" href="fn.root_key_admin_test.html" title="fn linera_views::test_utils::root_key_admin_test">root_<wbr>key_<wbr>admin_<wbr>test</a></dt><dd>Tests listing the root keys.</dd><dt><a class="fn" href="fn.run_big_write_read.html" title="fn linera_views::test_utils::run_big_write_read">run_<wbr>big_<wbr>write_<wbr>read</a></dt><dd>DynamoDB has limits at 1 MB (for pagination), 4 MB (for write)
Let us go right past them at 20 MB of data with writing and then
reading it. And 20 MB is not huge by any mean. All <code>KeyValueStore</code>
must handle that.</dd><dt><a class="fn" href="fn.run_reads.html" title="fn linera_views::test_utils::run_reads">run_<wbr>reads</a></dt><dd>This test starts with a collection of key/values being inserted into the code
which is then followed by a number of reading tests. The functionalities being
tested are all the reading functionalities:</dd><dt><a class="fn" href="fn.run_test_batch_from_blank.html" title="fn linera_views::test_utils::run_test_batch_from_blank">run_<wbr>test_<wbr>batch_<wbr>from_<wbr>blank</a></dt><dd>Writes and then reads data under a prefix, and verifies the result.</dd><dt><a class="fn" href="fn.run_writes_from_blank.html" title="fn linera_views::test_utils::run_writes_from_blank">run_<wbr>writes_<wbr>from_<wbr>blank</a></dt><dd>Run many operations on batches always starting from a blank state.</dd><dt><a class="fn" href="fn.run_writes_from_state.html" title="fn linera_views::test_utils::run_writes_from_state">run_<wbr>writes_<wbr>from_<wbr>state</a></dt><dd>Run some deterministic and random batches operation and check their
correctness</dd><dt><a class="fn" href="fn.span_random_reordering_put_delete.html" title="fn linera_views::test_utils::span_random_reordering_put_delete">span_<wbr>random_<wbr>reordering_<wbr>put_<wbr>delete</a></dt><dd>A random reordering of the puts and deletes.
For something like <code>MapView</code> it should get us the same result whatever way we are calling.</dd><dt><a class="fn" href="fn.tombstone_triggering_test.html" title="fn linera_views::test_utils::tombstone_triggering_test">tombstone_<wbr>triggering_<wbr>test</a></dt><dd>That test is especially challenging for ScyllaDB.
In its default settings, Scylla has a limitation to 10000 tombstones.
A tombstone is an indication that the data has been deleted. That
is thus a trie data structure for checking whether a requested key
is deleted or not.</dd></dl></section></div></main></body></html>