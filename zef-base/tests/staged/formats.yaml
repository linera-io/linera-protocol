---
Address:
  ENUM:
    0:
      Burn: UNIT
    1:
      Account:
        NEWTYPE:
          TYPENAME: ChainId
Amount:
  NEWTYPESTRUCT: U64
Balance:
  NEWTYPESTRUCT: U128
Block:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - epoch:
        TYPENAME: Epoch
    - incoming_messages:
        SEQ:
          TYPENAME: MessageGroup
    - operations:
        SEQ:
          TYPENAME: Operation
    - height:
        TYPENAME: BlockHeight
    - previous_block_hash:
        OPTION:
          TYPENAME: HashValue
BlockAndRound:
  STRUCT:
    - block:
        TYPENAME: Block
    - round:
        TYPENAME: RoundNumber
BlockHeight:
  NEWTYPESTRUCT: U64
BlockHeightRange:
  STRUCT:
    - start:
        TYPENAME: BlockHeight
    - limit:
        OPTION: U64
BlockProposal:
  STRUCT:
    - content:
        TYPENAME: BlockAndRound
    - owner:
        TYPENAME: Owner
    - signature:
        TYPENAME: Signature
Certificate:
  STRUCT:
    - value:
        TYPENAME: Value
    - signatures:
        SEQ:
          TUPLE:
            - TYPENAME: ValidatorName
            - TYPENAME: Signature
ChainDescription:
  ENUM:
    0:
      Root:
        NEWTYPE: U64
    1:
      Child:
        NEWTYPE:
          TYPENAME: OperationId
ChainId:
  NEWTYPESTRUCT:
    TYPENAME: HashValue
ChainInfo:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - epoch:
        OPTION:
          TYPENAME: Epoch
    - description:
        OPTION:
          TYPENAME: ChainDescription
    - manager:
        TYPENAME: ChainManager
    - balance:
        TYPENAME: Balance
    - block_hash:
        OPTION:
          TYPENAME: HashValue
    - next_block_height:
        TYPENAME: BlockHeight
    - state_hash:
        TYPENAME: HashValue
    - requested_execution_state:
        OPTION:
          TYPENAME: ExecutionState
    - requested_pending_messages:
        SEQ:
          TYPENAME: MessageGroup
    - requested_sent_certificates:
        SEQ:
          TYPENAME: Certificate
    - count_received_certificates: U64
    - requested_received_certificates:
        SEQ:
          TYPENAME: Certificate
ChainInfoQuery:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - test_next_block_height:
        OPTION:
          TYPENAME: BlockHeight
    - request_execution_state: BOOL
    - request_pending_messages: BOOL
    - request_sent_certificates_in_range:
        OPTION:
          TYPENAME: BlockHeightRange
    - request_received_certificates_excluding_first_nth:
        OPTION: U64
ChainInfoResponse:
  STRUCT:
    - info:
        TYPENAME: ChainInfo
    - signature:
        OPTION:
          TYPENAME: Signature
ChainManager:
  ENUM:
    0:
      None: UNIT
    1:
      Single:
        NEWTYPE:
          TYPENAME: SingleOwnerManager
    2:
      Multi:
        NEWTYPE:
          TYPENAME: MultiOwnerManager
ChainState:
  STRUCT:
    - description:
        OPTION:
          TYPENAME: ChainDescription
    - state:
        TYPENAME: ExecutionState
    - state_hash:
        TYPENAME: HashValue
    - block_hash:
        OPTION:
          TYPENAME: HashValue
    - next_block_height:
        TYPENAME: BlockHeight
    - confirmed_log:
        SEQ:
          TYPENAME: HashValue
    - received_log:
        SEQ:
          TYPENAME: HashValue
    - outboxes:
        MAP:
          KEY:
            TYPENAME: ChainId
          VALUE:
            TYPENAME: OutboxState
    - inboxes:
        MAP:
          KEY:
            TYPENAME: ChainId
          VALUE:
            TYPENAME: InboxState
ChainStatus:
  ENUM:
    0:
      ManagedBy:
        STRUCT:
          - admin_id:
              TYPENAME: ChainId
          - subscribed: BOOL
          - next_admin_height:
              TYPENAME: BlockHeight
    1:
      Managing:
        STRUCT:
          - subscribers:
              SEQ:
                TYPENAME: ChainId
          - next_epoch_to_create:
              TYPENAME: Epoch
          - history:
              SEQ:
                TYPENAME: BlockHeight
Committee:
  STRUCT:
    - voting_rights:
        MAP:
          KEY:
            TYPENAME: ValidatorName
          VALUE: U64
    - total_votes: U64
CrossChainRequest:
  ENUM:
    0:
      UpdateRecipient:
        STRUCT:
          - sender:
              TYPENAME: ChainId
          - recipient:
              TYPENAME: ChainId
          - certificates:
              SEQ:
                TYPENAME: Certificate
    1:
      ConfirmUpdatedRecipient:
        STRUCT:
          - sender:
              TYPENAME: ChainId
          - recipient:
              TYPENAME: ChainId
          - height:
              TYPENAME: BlockHeight
Epoch:
  NEWTYPESTRUCT: U64
Error:
  ENUM:
    0:
      InactiveChain:
        NEWTYPE:
          TYPENAME: ChainId
    1:
      InvalidOwner: UNIT
    2:
      UnexpectedPreviousBlockHash: UNIT
    3:
      UnexpectedBlockHeight: UNIT
    4:
      InvalidBlockHeight: UNIT
    5:
      PreviousBlockMustBeConfirmedFirst: UNIT
    6:
      MissingEarlierBlocks:
        STRUCT:
          - current_block_height:
              TYPENAME: BlockHeight
    7:
      SequenceOverflow: UNIT
    8:
      SequenceUnderflow: UNIT
    9:
      AmountOverflow: UNIT
    10:
      AmountUnderflow: UNIT
    11:
      BalanceOverflow: UNIT
    12:
      BalanceUnderflow: UNIT
    13:
      UnsupportedOperation: UNIT
    14:
      InvalidSignature:
        STRUCT:
          - error: STR
          - type_name: STR
    15:
      InvalidSigner: UNIT
    16:
      CertificateRequiresQuorum: UNIT
    17:
      CertificateValidatorReuse: UNIT
    18:
      InvalidCertificate: UNIT
    19:
      InvalidChainInfoResponse: UNIT
    20:
      InvalidEpoch:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
    21:
      IncorrectTransferAmount: UNIT
    22:
      InsufficientFunding:
        STRUCT:
          - current_balance:
              TYPENAME: Balance
    23:
      InvalidNewChainId:
        NEWTYPE:
          TYPENAME: ChainId
    24:
      InvalidNewChainAdminHeight:
        NEWTYPE:
          TYPENAME: ChainId
    25:
      InvalidNewChainAdminId:
        NEWTYPE:
          TYPENAME: ChainId
    26:
      InvalidSubscriptionToNewCommittees:
        NEWTYPE:
          TYPENAME: ChainId
    27:
      InvalidCommittees: UNIT
    28:
      InvalidCommitteeCreation: UNIT
    29:
      InsufficientRound:
        NEWTYPE:
          TYPENAME: RoundNumber
    30:
      HasLockedBlock:
        TUPLE:
          - TYPENAME: BlockHeight
          - TYPENAME: RoundNumber
    31:
      MissingCrossChainUpdate:
        STRUCT:
          - sender_id:
              TYPENAME: ChainId
          - height:
              TYPENAME: BlockHeight
    32:
      InvalidMessageContent:
        STRUCT:
          - sender_id:
              TYPENAME: ChainId
          - height:
              TYPENAME: BlockHeight
          - index: U64
    33:
      InvalidMessageOrder:
        STRUCT:
          - sender_id:
              TYPENAME: ChainId
          - height:
              TYPENAME: BlockHeight
          - index: U64
          - expected_height:
              TYPENAME: BlockHeight
          - expected_index: U64
    34:
      CertificateNotFound: UNIT
    35:
      InvalidCrossChainRequest: UNIT
    36:
      InvalidBlockProposal: UNIT
    37:
      InvalidBlockChaining: UNIT
    38:
      IncorrectStateHash: UNIT
    39:
      ClientErrorWhileProcessingBlockProposal: UNIT
    40:
      ClientErrorWhileQueryingCertificate: UNIT
    41:
      WrongShard: UNIT
    42:
      InvalidDecoding: UNIT
    43:
      UnexpectedMessage: UNIT
    44:
      ClientIoError:
        STRUCT:
          - error: STR
    45:
      StorageIoError:
        STRUCT:
          - error: STR
    46:
      StorageBcsError:
        STRUCT:
          - error: STR
    47:
      MissingCertificate:
        STRUCT:
          - hash:
              TYPENAME: HashValue
Event:
  STRUCT:
    - height:
        TYPENAME: BlockHeight
    - index: U64
    - operation:
        TYPENAME: Operation
ExecutionState:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - epoch:
        OPTION:
          TYPENAME: Epoch
    - status:
        OPTION:
          TYPENAME: ChainStatus
    - committees:
        MAP:
          KEY:
            TYPENAME: Epoch
          VALUE:
            TYPENAME: Committee
    - manager:
        TYPENAME: ChainManager
    - balance:
        TYPENAME: Balance
HashValue:
  NEWTYPESTRUCT:
    TUPLEARRAY:
      CONTENT: U8
      SIZE: 64
InboxState:
  STRUCT:
    - next_height_to_receive:
        TYPENAME: BlockHeight
    - received_events:
        SEQ:
          TYPENAME: Event
    - expected_events:
        SEQ:
          TYPENAME: Event
Message:
  ENUM:
    0:
      BlockProposal:
        NEWTYPE:
          TYPENAME: BlockProposal
    1:
      Certificate:
        NEWTYPE:
          TYPENAME: Certificate
    2:
      ChainInfoQuery:
        NEWTYPE:
          TYPENAME: ChainInfoQuery
    3:
      Vote:
        NEWTYPE:
          TYPENAME: Vote
    4:
      ChainInfoResponse:
        NEWTYPE:
          TYPENAME: ChainInfoResponse
    5:
      Error:
        NEWTYPE:
          TYPENAME: Error
    6:
      CrossChainRequest:
        NEWTYPE:
          TYPENAME: CrossChainRequest
MessageGroup:
  STRUCT:
    - sender_id:
        TYPENAME: ChainId
    - height:
        TYPENAME: BlockHeight
    - operations:
        SEQ:
          TUPLE:
            - U64
            - TYPENAME: Operation
MultiOwnerManager:
  STRUCT:
    - owners:
        MAP:
          KEY:
            TYPENAME: Owner
          VALUE: UNIT
    - proposed:
        OPTION:
          TYPENAME: BlockProposal
    - locked:
        OPTION:
          TYPENAME: Certificate
    - pending:
        OPTION:
          TYPENAME: Vote
Operation:
  ENUM:
    0:
      Transfer:
        STRUCT:
          - recipient:
              TYPENAME: Address
          - amount:
              TYPENAME: Amount
          - user_data:
              TYPENAME: UserData
    1:
      OpenChain:
        STRUCT:
          - id:
              TYPENAME: ChainId
          - owner:
              TYPENAME: Owner
          - admin_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
          - committees:
              MAP:
                KEY:
                  TYPENAME: Epoch
                VALUE:
                  TYPENAME: Committee
          - next_admin_height:
              TYPENAME: BlockHeight
    2:
      CloseChain: UNIT
    3:
      ChangeOwner:
        STRUCT:
          - new_owner:
              TYPENAME: Owner
    4:
      ChangeMultipleOwners:
        STRUCT:
          - new_owners:
              SEQ:
                TYPENAME: Owner
    5:
      NewCommittee:
        STRUCT:
          - admin_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
          - committee:
              TYPENAME: Committee
    6:
      SubscribeToNewCommittees:
        STRUCT:
          - id:
              TYPENAME: ChainId
          - admin_id:
              TYPENAME: ChainId
          - next_admin_height:
              TYPENAME: BlockHeight
OperationId:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - height:
        TYPENAME: BlockHeight
    - index: U64
OutboxState:
  STRUCT:
    - queue:
        SEQ:
          TUPLE:
            - TYPENAME: BlockHeight
            - TYPENAME: HashValue
Owner:
  NEWTYPESTRUCT:
    TYPENAME: PublicKey
PublicKey:
  NEWTYPESTRUCT:
    TUPLEARRAY:
      CONTENT: U8
      SIZE: 32
RoundNumber:
  NEWTYPESTRUCT: U64
Signature:
  NEWTYPESTRUCT:
    TUPLEARRAY:
      CONTENT: U8
      SIZE: 64
SingleOwnerManager:
  STRUCT:
    - owner:
        TYPENAME: Owner
    - pending:
        OPTION:
          TYPENAME: Vote
UserData:
  NEWTYPESTRUCT:
    OPTION:
      TUPLEARRAY:
        CONTENT: U8
        SIZE: 32
ValidatorName:
  NEWTYPESTRUCT:
    TYPENAME: PublicKey
Value:
  ENUM:
    0:
      ValidatedBlock:
        STRUCT:
          - block:
              TYPENAME: Block
          - round:
              TYPENAME: RoundNumber
          - state_hash:
              TYPENAME: HashValue
    1:
      ConfirmedBlock:
        STRUCT:
          - block:
              TYPENAME: Block
          - state_hash:
              TYPENAME: HashValue
Vote:
  STRUCT:
    - value:
        TYPENAME: Value
    - validator:
        TYPENAME: ValidatorName
    - signature:
        TYPENAME: Signature

