<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Represents a single database connection."><title>Connection in sqlx_core::connection - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="sqlx_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../sqlx_core/index.html">sqlx_<wbr>core</a><span class="version">0.8.6</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Connection</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Database" title="Database">Database</a></li><li><a href="#associatedtype.Options" title="Options">Options</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.begin" title="begin">begin</a></li><li><a href="#tymethod.close" title="close">close</a></li><li><a href="#tymethod.ping" title="ping">ping</a></li><li><a href="#tymethod.shrink_buffers" title="shrink_buffers">shrink_buffers</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.begin_with" title="begin_with">begin_with</a></li><li><a href="#method.cached_statements_size" title="cached_statements_size">cached_statements_size</a></li><li><a href="#method.clear_cached_statements" title="clear_cached_statements">clear_cached_statements</a></li><li><a href="#method.connect" title="connect">connect</a></li><li><a href="#method.connect_with" title="connect_with">connect_with</a></li><li><a href="#method.is_in_transaction" title="is_in_transaction">is_in_transaction</a></li><li><a href="#method.transaction" title="transaction">transaction</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In sqlx_<wbr>core::<wbr>connection</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">sqlx_core</a>::<wbr><a href="index.html">connection</a></div><h1>Trait <span class="trait">Connection</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/sqlx_core/connection.rs.html#14-184">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Connection: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> {
    type <a href="#associatedtype.Database" class="associatedtype">Database</a>: <a class="trait" href="../database/trait.Database.html" title="trait sqlx_core::database::Database">Database</a>&lt;Connection = Self&gt;;
    type <a href="#associatedtype.Options" class="associatedtype">Options</a>: <a class="trait" href="trait.ConnectOptions.html" title="trait sqlx_core::connection::ConnectOptions">ConnectOptions</a>&lt;Connection = Self&gt;;

    // Required methods
    fn <a href="#tymethod.close" class="fn">close</a>(self) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'static, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.ping" class="fn">ping</a>(&amp;mut self) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.begin" class="fn">begin</a>(
        &amp;mut self,
    ) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction">Transaction</a>&lt;'_, Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>&gt;, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.shrink_buffers" class="fn">shrink_buffers</a>(&amp;mut self);

    // Provided methods
    fn <a href="#method.begin_with" class="fn">begin_with</a>(
        &amp;mut self,
        statement: impl <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'static, <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>&gt;&gt;,
    ) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction">Transaction</a>&lt;'_, Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>&gt;, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.is_in_transaction" class="fn">is_in_transaction</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.transaction" class="fn">transaction</a>&lt;'a, F, R, E&gt;(
        &amp;'a mut self,
        callback: F,
    ) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;R, E&gt;&gt;
       <span class="where">where for&lt;'c&gt; F: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;'c mut <a class="struct" href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction">Transaction</a>&lt;'_, Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>&gt;) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'c, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;R, E&gt;&gt; + 'a + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,
             Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,
             R: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,
             E: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.cached_statements_size" class="fn">cached_statements_size</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>
       <span class="where">where Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>: <a class="trait" href="../database/trait.HasStatementCache.html" title="trait sqlx_core::database::HasStatementCache">HasStatementCache</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.clear_cached_statements" class="fn">clear_cached_statements</a>(&amp;mut self) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;
       <span class="where">where Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>: <a class="trait" href="../database/trait.HasStatementCache.html" title="trait sqlx_core::database::HasStatementCache">HasStatementCache</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.connect" class="fn">connect</a>(url: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'static, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.connect_with" class="fn">connect_with</a>(
        options: &amp;Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Options" title="type sqlx_core::connection::Connection::Options">Options</a>,
    ) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span> { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Represents a single database connection.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><section id="associatedtype.Database" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#15">Source</a><h4 class="code-header">type <a href="#associatedtype.Database" class="associatedtype">Database</a>: <a class="trait" href="../database/trait.Database.html" title="trait sqlx_core::database::Database">Database</a>&lt;Connection = Self&gt;</h4></section><section id="associatedtype.Options" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#17">Source</a><h4 class="code-header">type <a href="#associatedtype.Options" class="associatedtype">Options</a>: <a class="trait" href="trait.ConnectOptions.html" title="trait sqlx_core::connection::ConnectOptions">ConnectOptions</a>&lt;Connection = Self&gt;</h4></section></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.close" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#35">Source</a><h4 class="code-header">fn <a href="#tymethod.close" class="fn">close</a>(self) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'static, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Explicitly close this database connection.</p>
<p>This notifies the database server that the connection is closing so that it can
free up any server-side resources in use.</p>
<p>While connections can simply be dropped to clean up local resources,
the <code>Drop</code> handler itself cannot notify the server that the connection is being closed
because that may require I/O to send a termination message. That can result in a delay
before the server learns that the connection is gone, usually from a TCP keepalive timeout.</p>
<p>Creating and dropping many connections in short order without calling <code>.close()</code> may
lead to errors from the database server because those senescent connections will still
count against any connection limit or quota that is configured.</p>
<p>Therefore it is recommended to call <code>.close()</code> on a connection when you are done using it
and to <code>.await</code> the result to ensure the termination message is sent.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.ping" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#44">Source</a><h4 class="code-header">fn <a href="#tymethod.ping" class="fn">ping</a>(&amp;mut self) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Checks if a connection to the database is still valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.begin" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#49-51">Source</a><h4 class="code-header">fn <a href="#tymethod.begin" class="fn">begin</a>(
    &amp;mut self,
) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction">Transaction</a>&lt;'_, Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>&gt;, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Begin a new transaction or establish a savepoint within the active transaction.</p>
<p>Returns a <a href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction"><code>Transaction</code></a> for controlling and tracking the new transaction.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.shrink_buffers" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#155">Source</a><h4 class="code-header">fn <a href="#tymethod.shrink_buffers" class="fn">shrink_buffers</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Restore any buffers in the connection to their default capacity, if possible.</p>
<p>Sending a large query or receiving a resultset with many columns can cause the connection
to allocate additional buffer space to fit the data which is retained afterwards in
case it’s needed again. This can give the outward appearance of a memory leak, but is
in fact the intended behavior.</p>
<p>Calling this method tells the connection to release that excess memory if it can,
though be aware that calling this too often can cause unnecessary thrashing or
fragmentation in the global allocator. If there’s still data in the connection buffers
(unlikely if the last query was run to completion) then it may need to be moved to
allow the buffers to shrink.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.begin_with" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#59-67">Source</a><h4 class="code-header">fn <a href="#method.begin_with" class="fn">begin_with</a>(
    &amp;mut self,
    statement: impl <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'static, <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>&gt;&gt;,
) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction">Transaction</a>&lt;'_, Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>&gt;, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Begin a new transaction with a custom statement.</p>
<p>Returns a <a href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction"><code>Transaction</code></a> for controlling and tracking the new transaction.</p>
<p>Returns an error if the connection is already in a transaction or if
<code>statement</code> does not put the connection into a transaction.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.is_in_transaction" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#76-78">Source</a><h4 class="code-header">fn <a href="#method.is_in_transaction" class="fn">is_in_transaction</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Returns <code>true</code> if the connection is currently in a transaction.</p>
<h5 id="note-automatic-rollbacks-may-not-be-counted"><a class="doc-anchor" href="#note-automatic-rollbacks-may-not-be-counted">§</a>Note: Automatic Rollbacks May Not Be Counted</h5>
<p>Certain database errors (such as a serializable isolation failure)
can cause automatic rollbacks of a transaction
which may not be indicated in the return value of this method.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.transaction" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#97-124">Source</a><h4 class="code-header">fn <a href="#method.transaction" class="fn">transaction</a>&lt;'a, F, R, E&gt;(
    &amp;'a mut self,
    callback: F,
) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;R, E&gt;&gt;<div class="where">where
    for&lt;'c&gt; F: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;'c mut <a class="struct" href="../transaction/struct.Transaction.html" title="struct sqlx_core::transaction::Transaction">Transaction</a>&lt;'_, Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>&gt;) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'c, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;R, E&gt;&gt; + 'a + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,
    Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,
    R: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,
    E: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,</div></h4></section></summary><div class="docblock"><p>Execute the function inside a transaction.</p>
<p>If the function returns an error, the transaction will be rolled back. If it does not
return an error, the transaction will be committed.</p>
<h5 id="example"><a class="doc-anchor" href="#example">§</a>Example</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>sqlx::postgres::{PgConnection, PgRow};
<span class="kw">use </span>sqlx::Connection;

conn.transaction(|txn| Box::pin(<span class="kw">async move </span>{
    sqlx::query(<span class="string">"select * from .."</span>).fetch_all(<span class="kw-2">&amp;mut **</span>txn).<span class="kw">await
</span>})).<span class="kw">await</span></code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cached_statements_size" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#127-132">Source</a><h4 class="code-header">fn <a href="#method.cached_statements_size" class="fn">cached_statements_size</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a><div class="where">where
    Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>: <a class="trait" href="../database/trait.HasStatementCache.html" title="trait sqlx_core::database::HasStatementCache">HasStatementCache</a>,</div></h4></section></summary><div class="docblock"><p>The number of statements currently cached in the connection.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.clear_cached_statements" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#136-141">Source</a><h4 class="code-header">fn <a href="#method.clear_cached_statements" class="fn">clear_cached_statements</a>(&amp;mut self) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;<div class="where">where
    Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Database" title="type sqlx_core::connection::Connection::Database">Database</a>: <a class="trait" href="../database/trait.HasStatementCache.html" title="trait sqlx_core::database::HasStatementCache">HasStatementCache</a>,</div></h4></section></summary><div class="docblock"><p>Removes all statements from the cache, closing them on the server if
needed.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.connect" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#168-175">Source</a><h4 class="code-header">fn <a href="#method.connect" class="fn">connect</a>(url: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'static, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Establish a new database connection.</p>
<p>A value of <a href="trait.Connection.html#associatedtype.Options"><code>Options</code></a> is parsed from the provided connection string. This parsing
is database-specific.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.connect_with" class="method"><a class="src rightside" href="../../src/sqlx_core/connection.rs.html#178-183">Source</a><h4 class="code-header">fn <a href="#method.connect_with" class="fn">connect_with</a>(options: &amp;Self::<a class="associatedtype" href="trait.Connection.html#associatedtype.Options" title="type sqlx_core::connection::Connection::Options">Options</a>) -&gt; <a class="type" href="../../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'_, <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="enum" href="../error/enum.Error.html" title="enum sqlx_core::error::Error">Error</a>&gt;&gt;<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Establish a new database connection with the provided options.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-Connection-for-AnyConnection" class="impl"><a class="src rightside" href="../../src/sqlx_core/any/connection/mod.rs.html#70-125">Source</a><a href="#impl-Connection-for-AnyConnection" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.Connection.html" title="trait sqlx_core::connection::Connection">Connection</a> for <a class="struct" href="../any/struct.AnyConnection.html" title="struct sqlx_core::any::AnyConnection">AnyConnection</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Database-1" class="associatedtype trait-impl"><a class="src rightside" href="../../src/sqlx_core/any/connection/mod.rs.html#71">Source</a><a href="#associatedtype.Database-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Database" class="associatedtype">Database</a> = <a class="struct" href="../any/struct.Any.html" title="struct sqlx_core::any::Any">Any</a></h4></section><section id="associatedtype.Options-1" class="associatedtype trait-impl"><a class="src rightside" href="../../src/sqlx_core/any/connection/mod.rs.html#73">Source</a><a href="#associatedtype.Options-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Options" class="associatedtype">Options</a> = <a class="struct" href="../any/struct.AnyConnectOptions.html" title="struct sqlx_core::any::AnyConnectOptions">AnyConnectOptions</a></h4></section></div></details></div><script src="../../trait.impl/sqlx_core/connection/trait.Connection.js" async></script></section></div></main></body></html>