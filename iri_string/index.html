<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="String types for RFC 3987 Internationalized Resource Identifiers (IRIs) and RFC 3986 Uniform Resource Identifiers (URIs)."><title>iri_string - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="iri_string" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-3a5871a4.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../iri_string/index.html">iri_<wbr>string</a><span class="version">0.7.8</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#capability" title="Capability">Capability</a><ul><li><a href="#string-types" title="String types">String types</a></li><li><a href="#resolvers" title="Resolvers">Resolvers</a></li><li><a href="#validators" title="Validators">Validators</a></li><li><a href="#percent-encoding" title="Percent encoding">Percent encoding</a></li><li><a href="#iri-builder" title="IRI builder">IRI builder</a></li><li><a href="#uri-template-rfc-6570" title="URI template (RFC 6570)">URI template (RFC 6570)</a></li></ul></li><li><a href="#feature-flags" title="Feature flags">Feature flags</a><ul><li><a href="#std-and-alloc-support" title="`std` and `alloc` support"><code>std</code> and <code>alloc</code> support</a></li><li><a href="#other-features" title="Other features">Other features</a></li></ul></li><li><a href="#rationale" title="Rationale">Rationale</a><ul><li><a href="#foo-foo-foo-foo-foo--are-valid-iris" title="`foo:`, `foo:/`, `foo://`, `foo:///`, `foo:////`, … are valid IRIs"><code>foo:</code>, <code>foo:/</code>, <code>foo://</code>, <code>foo:///</code>, <code>foo:////</code>, … are valid IRIs</a></li><li><a href="#iri-resolution-can-fail" title="IRI resolution can fail">IRI resolution can fail</a></li></ul></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>iri_string</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/iri_string/lib.rs.html#1-159">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>String types for <a href="https://tools.ietf.org/html/rfc3987">RFC 3987 Internationalized Resource Identifiers (IRIs)</a> and
<a href="https://tools.ietf.org/html/rfc3986">RFC 3986 Uniform Resource Identifiers (URIs)</a>.</p>
<p>Note that this crate does not have any extra knowledge about protocols.
Comparisons between IRI strings by <code>PartialEq</code> and <code>Eq</code> is implemented as <a href="https://tools.ietf.org/html/rfc3986#section-6.2.1">simple string
comparison</a>.
You should implement by yourself or use another crate to use such extra knowledge to compare
IRIs / URIs.</p>
<h2 id="capability"><a class="doc-anchor" href="#capability">§</a>Capability</h2>
<p>This crate provides many features for IRIs / URIs.</p>
<h3 id="string-types"><a class="doc-anchor" href="#string-types">§</a>String types</h3>
<p><a href="types/index.html" title="mod iri_string::types"><code>types</code> module</a> module provides various string types for IRIs and URIs.
The borrowed string types are unsized slice types (such as <code>[u8]</code> and <code>str</code>)
and not a sized struct, so they are highly interoperable with for example
<code>Cow</code> and <code>Rc</code>. Conversions between <code>&amp;str</code> and borrwed IRI string types are easy.</p>
<h3 id="resolvers"><a class="doc-anchor" href="#resolvers">§</a>Resolvers</h3>
<p><a href="resolve/index.html" title="mod iri_string::resolve"><code>resolve</code> module</a> provides IRI / URI references resolver.
However, you are recommended to use methods of string types such as
<a href="types/struct.RiReferenceStr.html#method.resolve_against" title="method iri_string::types::RiReferenceStr::resolve_against"><code>RiReferenceStr::resolve_against()</code></a> or <a href="types/struct.RiRelativeStr.html#method.resolve_against" title="method iri_string::types::RiRelativeStr::resolve_against"><code>RiRelativeStr::resolve_against()</code></a>
if you don’t intend to resolve multiple IRIs against the same base.</p>
<h3 id="validators"><a class="doc-anchor" href="#validators">§</a>Validators</h3>
<p>Validator functions are provided from <a href="validate/index.html" title="mod iri_string::validate"><code>validate</code> module</a>.</p>
<h3 id="percent-encoding"><a class="doc-anchor" href="#percent-encoding">§</a>Percent encoding</h3>
<p><a href="percent_encode/index.html" title="mod iri_string::percent_encode"><code>percent_encode</code> module</a> provides a converter to encode
user-provided string into percent-encoded one (if syntax requires so).</p>
<h3 id="iri-builder"><a class="doc-anchor" href="#iri-builder">§</a>IRI builder</h3>
<p><a href="build/index.html" title="mod iri_string::build"><code>build</code> module</a> provides IRI builder.</p>
<h3 id="uri-template-rfc-6570"><a class="doc-anchor" href="#uri-template-rfc-6570">§</a>URI template (RFC 6570)</h3>
<p><a href="template/index.html" title="mod iri_string::template"><code>template</code> module</a> provides an RFC 6570 URI Template processor.</p>
<h2 id="feature-flags"><a class="doc-anchor" href="#feature-flags">§</a>Feature flags</h2><h3 id="std-and-alloc-support"><a class="doc-anchor" href="#std-and-alloc-support">§</a><code>std</code> and <code>alloc</code> support</h3>
<p>This crate supports <code>no_std</code> usage.</p>
<ul>
<li><code>alloc</code> feature:
<ul>
<li>Std library or <code>alloc</code> crate is required.</li>
<li>This feature enables types and functions which require memory allocation,
e.g. <code>types::IriString</code> and <code>types::IriRelativeStr::resolve_against()</code>.</li>
</ul>
</li>
<li><code>std</code> feature (<strong>enabled by default</strong>):
<ul>
<li>Std library is required.</li>
<li>This automatically enables <code>alloc</code> feature.</li>
<li>The feature let the crate utilize std-specific stuff, such as <code>std::error::Error</code> trait.</li>
</ul>
</li>
<li>With neither of them:
<ul>
<li>The crate can be used in <code>no_std</code> environment.</li>
</ul>
</li>
</ul>
<h3 id="other-features"><a class="doc-anchor" href="#other-features">§</a>Other features</h3>
<ul>
<li><code>serde</code>
<ul>
<li>Enables serde support.</li>
<li>Implement <code>Serailize</code> and <code>Deserialize</code> traits for IRI / URI types.</li>
</ul>
</li>
<li><code>memchr</code>
<ul>
<li>Enables faster internal character search.</li>
</ul>
</li>
</ul>
<h2 id="rationale"><a class="doc-anchor" href="#rationale">§</a>Rationale</h2><h3 id="foo-foo-foo-foo-foo--are-valid-iris"><a class="doc-anchor" href="#foo-foo-foo-foo-foo--are-valid-iris">§</a><code>foo:</code>, <code>foo:/</code>, <code>foo://</code>, <code>foo:///</code>, <code>foo:////</code>, … are valid IRIs</h3>
<p>All of these are valid IRIs.
(On the other hand, all of them are invalid as relative IRI reference, because they don’t
match <code>relative-part</code> rule, especially <code>path-noscheme</code>, as the first path component of the
relative path contains a colon.)</p>
<ul>
<li><code>foo:</code>
<ul>
<li>Decomposed to <code>&lt;scheme="foo"&gt;:&lt;path-empty=""&gt;</code>.</li>
</ul>
</li>
<li><code>foo:/</code>
<ul>
<li>Decomposed to <code>&lt;scheme="foo"&gt;:&lt;path-absolute="/"&gt;</code>.</li>
</ul>
</li>
<li><code>foo://</code>
<ul>
<li>Decomposed to <code>&lt;scheme="foo"&gt;://&lt;authority=""&gt;&lt;path-absolute=""&gt;</code>.</li>
</ul>
</li>
<li><code>foo:///</code>
<ul>
<li>Decomposed to <code>&lt;scheme="foo"&gt;://&lt;authority=""&gt;&lt;path-absolute="/"&gt;</code>.</li>
</ul>
</li>
<li><code>foo:////</code>
<ul>
<li>Decomposed to <code>&lt;scheme="foo"&gt;://&lt;authority=""&gt;&lt;path-absolute="//"&gt;</code>.</li>
</ul>
</li>
<li><code>foo://///</code>
<ul>
<li>Decomposed to <code>&lt;scheme="foo"&gt;://&lt;authority=""&gt;&lt;path-absolute="///"&gt;</code>.</li>
</ul>
</li>
</ul>
<p>RFC 3986 says that “if authority is absent, path cannot start with <code>//</code>”.</p>
<blockquote>
<p>When authority is present, the path must either be empty or begin with a slash (“/”)
character. When authority is not present, the path cannot begin with two slash characters
(“//”).</p>
<p>— <a href="https://tools.ietf.org/html/rfc3986#section-3">RFC 3986, section 3. Syntax Components</a>.</p>
</blockquote>
<blockquote>
<p>If a URI contains an authority component, then the path component must either be empty or
begin with a slash (“/”) character. If a URI does not contain an authority component, then the
path cannot begin with two slash characters (“//”).</p>
<p>— <a href="https://tools.ietf.org/html/rfc3986#section-3.3">RFC 3986, section 3.3. Path</a></p>
</blockquote>
<p>We should interpret them as “if <code>authority</code> rule is completely unused (i.e. does not match any
strings <strong>including empty string</strong>), path cannot start with <code>//</code>”.
In other words, we should consider this as <strong>explaining the ABNF of <code>hier-part</code> rule</strong>
(especially why it does not use <code>path</code> rule), but <strong>not adding extra restriction to the rule
written in ABNF</strong>.</p>
<p>This restriction is necessary to remove ambiguity in decomposition of some strings.
For example, it is natural to decompose <code>foo://</code> to <code>&lt;scheme="foo"&gt;:&lt;path="//"&gt;</code> or
<code>&lt;scheme="foo"&gt;://&lt;authority=""&gt;&lt;path=""&gt;</code>.
The restriction, <strong>which is already encoded to the ABNF rule</strong>, tells us to always decompose to
the latter form, rather than the former one.</p>
<p>Readers of the spec might be confused by “when authority is <strong>present</strong>” and “if a URI
<strong>contains</strong> an authority component, which is unclear.
However, based on the interpretation above, we should consider authority part with empty string
as satisfying the condition “authority is <strong>present</strong>”.</p>
<h3 id="iri-resolution-can-fail"><a class="doc-anchor" href="#iri-resolution-can-fail">§</a>IRI resolution can fail</h3>
<p>For some inputs, resulting string of IRI normalization and resolution can be syntactically
correct but semantically wrong. In such cases, the normalizer and resolver provided by this
crate do not silently “fix” the IRI by non-standard processing, but just
fail by returning <code>Err(_)</code>.</p>
<p>For details, see the documentation of <a href="normalize/index.html" title="mod iri_string::normalize"><code>normalize</code></a> module.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="build/index.html" title="mod iri_string::build">build</a></dt><dd>URI/IRI builder.</dd><dt><a class="mod" href="components/index.html" title="mod iri_string::components">components</a></dt><dd>Components of IRIs.</dd><dt><a class="mod" href="convert/index.html" title="mod iri_string::convert">convert</a></dt><dd>Conversion between URI/IRI types.</dd><dt><a class="mod" href="format/index.html" title="mod iri_string::format">format</a></dt><dd>Utilities for formatting (especially <code>Display</code> trait).</dd><dt><a class="mod" href="mask_password/index.html" title="mod iri_string::mask_password">mask_<wbr>password</a></dt><dd>Password masker.</dd><dt><a class="mod" href="normalize/index.html" title="mod iri_string::normalize">normalize</a></dt><dd>Normalization.</dd><dt><a class="mod" href="percent_encode/index.html" title="mod iri_string::percent_encode">percent_<wbr>encode</a></dt><dd>Percent encoding.</dd><dt><a class="mod" href="resolve/index.html" title="mod iri_string::resolve">resolve</a></dt><dd>URI and IRI resolvers.</dd><dt><a class="mod" href="spec/index.html" title="mod iri_string::spec">spec</a></dt><dd>IRI specs.</dd><dt><a class="mod" href="template/index.html" title="mod iri_string::template">template</a></dt><dd>Processor for <a href="https://www.rfc-editor.org/rfc/rfc6570.html">RFC 6570</a> URI Template.</dd><dt><a class="mod" href="types/index.html" title="mod iri_string::types">types</a></dt><dd>URI and IRI types.</dd><dt><a class="mod" href="validate/index.html" title="mod iri_string::validate">validate</a></dt><dd>Validators.</dd></dl></section></div></main></body></html>