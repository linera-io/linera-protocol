[package]
name = "linera-indexer"
description = "Indexer for Linera protocol."
readme = "README.md"
documentation = "https://docs.rs/linera-indexer/latest/linera_indexer/"

authors.workspace = true
edition.workspace = true
homepage.workspace = true
license.workspace = true
repository.workspace = true
version.workspace = true

[features]
default = ["rocksdb"]
rocksdb = ["linera-views/rocksdb", "linera-core/rocksdb"]
dynamodb = ["linera-views/dynamodb", "linera-core/dynamodb"]
scylladb = ["linera-views/scylladb", "linera-core/scylladb"]
storage-service = ["linera-core/storage-service"]

[dependencies]
async-graphql.workspace = true
async-graphql-axum.workspace = true
async-trait.workspace = true
async-tungstenite.workspace = true
axum = { workspace = true, features = ["ws"] }
bcs.workspace = true
bincode.workspace = true
clap.workspace = true
futures.workspace = true
graphql-ws-client = { version = "0.5", features = ["client-graphql-client"] }
graphql_client = { version = "0.13", features = ["reqwest-rustls"] }
linera-base = { workspace = true, features = ["test"] }
linera-chain.workspace = true
linera-core.workspace = true
linera-execution.workspace = true
linera-service-graphql-client.workspace = true
linera-version.workspace = true
linera-views.workspace = true
prost.workspace = true
reqwest.workspace = true
sqlx = { version = "0.8", features = ["runtime-tokio-rustls", "sqlite"] }
thiserror.workspace = true
tokio = { workspace = true, features = ["rt-multi-thread", "macros"] }
tokio-stream = "0.1"
tonic = { workspace = true, features = ["server", "codegen", "prost"] }
tower-http = { workspace = true, features = ["cors"] }
tracing.workspace = true

[dev-dependencies]
assert_matches.workspace = true

[build-dependencies]
tonic-build = { workspace = true, features = ["prost"] }

[package.metadata.cargo-machete]
ignored = ["prost"]
