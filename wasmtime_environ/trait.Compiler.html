<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An implementation of a compiler which can compile WebAssembly functions to machine code and perform other miscellaneous tasks needed by the JIT runtime."><title>Compiler in wasmtime_environ - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="wasmtime_environ" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../wasmtime_environ/index.html">wasmtime_<wbr>environ</a><span class="version">25.0.3</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Compiler</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.append_code" title="append_code">append_code</a></li><li><a href="#tymethod.append_dwarf" title="append_dwarf">append_dwarf</a></li><li><a href="#tymethod.compile_array_to_wasm_trampoline" title="compile_array_to_wasm_trampoline">compile_array_to_wasm_trampoline</a></li><li><a href="#tymethod.compile_function" title="compile_function">compile_function</a></li><li><a href="#tymethod.compile_wasm_to_array_trampoline" title="compile_wasm_to_array_trampoline">compile_wasm_to_array_trampoline</a></li><li><a href="#tymethod.compile_wasm_to_builtin" title="compile_wasm_to_builtin">compile_wasm_to_builtin</a></li><li><a href="#tymethod.compiled_function_relocation_targets" title="compiled_function_relocation_targets">compiled_function_relocation_targets</a></li><li><a href="#tymethod.flags" title="flags">flags</a></li><li><a href="#tymethod.is_branch_protection_enabled" title="is_branch_protection_enabled">is_branch_protection_enabled</a></li><li><a href="#tymethod.isa_flags" title="isa_flags">isa_flags</a></li><li><a href="#tymethod.triple" title="triple">triple</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.create_systemv_cie" title="create_systemv_cie">create_systemv_cie</a></li><li><a href="#method.object" title="object">object</a></li><li><a href="#method.page_size_align" title="page_size_align">page_size_align</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate wasmtime_<wbr>environ</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">wasmtime_environ</a></div><h1>Trait <span class="trait">Compiler</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/wasmtime_environ/compile/mod.rs.html#180-379">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Compiler: <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a> + <a class="trait" href="__core/marker/trait.Sync.html" title="trait wasmtime_environ::__core::marker::Sync">Sync</a> {
<details class="toggle type-contents-toggle"><summary class="hideme"><span>Show 14 methods</span></summary>    // Required methods
    fn <a href="#tymethod.compile_function" class="fn">compile_function</a>(
        &amp;self,
        translation: &amp;<a class="struct" href="struct.ModuleTranslation.html" title="struct wasmtime_environ::ModuleTranslation">ModuleTranslation</a>&lt;'_&gt;,
        index: <a class="struct" href="struct.DefinedFuncIndex.html" title="struct wasmtime_environ::DefinedFuncIndex">DefinedFuncIndex</a>,
        data: <a class="struct" href="struct.FunctionBodyData.html" title="struct wasmtime_environ::FunctionBodyData">FunctionBodyData</a>&lt;'_&gt;,
        types: &amp;<a class="struct" href="struct.ModuleTypesBuilder.html" title="struct wasmtime_environ::ModuleTypesBuilder">ModuleTypesBuilder</a>,
    ) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;(<a class="struct" href="struct.WasmFunctionInfo.html" title="struct wasmtime_environ::WasmFunctionInfo">WasmFunctionInfo</a>, <a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;), <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.compile_array_to_wasm_trampoline" class="fn">compile_array_to_wasm_trampoline</a>(
        &amp;self,
        translation: &amp;<a class="struct" href="struct.ModuleTranslation.html" title="struct wasmtime_environ::ModuleTranslation">ModuleTranslation</a>&lt;'_&gt;,
        types: &amp;<a class="struct" href="struct.ModuleTypesBuilder.html" title="struct wasmtime_environ::ModuleTypesBuilder">ModuleTypesBuilder</a>,
        index: <a class="struct" href="struct.DefinedFuncIndex.html" title="struct wasmtime_environ::DefinedFuncIndex">DefinedFuncIndex</a>,
    ) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;, <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.compile_wasm_to_array_trampoline" class="fn">compile_wasm_to_array_trampoline</a>(
        &amp;self,
        wasm_func_ty: &amp;<a class="struct" href="struct.WasmFuncType.html" title="struct wasmtime_environ::WasmFuncType">WasmFuncType</a>,
    ) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;, <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.compile_wasm_to_builtin" class="fn">compile_wasm_to_builtin</a>(
        &amp;self,
        index: <a class="struct" href="struct.BuiltinFunctionIndex.html" title="struct wasmtime_environ::BuiltinFunctionIndex">BuiltinFunctionIndex</a>,
    ) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;, <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.compiled_function_relocation_targets" class="fn">compiled_function_relocation_targets</a>&lt;'a&gt;(
        &amp;'a self,
        func: &amp;'a dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a>,
    ) -&gt; <a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/iter/trait.Iterator.html" title="trait wasmtime_environ::__core::iter::Iterator">Iterator</a>&lt;Item = <a class="enum" href="enum.RelocationTarget.html" title="enum wasmtime_environ::RelocationTarget">RelocationTarget</a>&gt; + 'a&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.append_code" class="fn">append_code</a>(
        &amp;self,
        obj: &amp;mut <a class="struct" href="../object/write/struct.Object.html" title="struct object::write::Object">Object</a>&lt;'static&gt;,
        funcs: &amp;[(<a class="struct" href="prelude/struct.String.html" title="struct wasmtime_environ::prelude::String">String</a>, <a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;)],
        resolve_reloc: &amp;dyn <a class="trait" href="__core/ops/trait.Fn.html" title="trait wasmtime_environ::__core::ops::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>, <a class="enum" href="enum.RelocationTarget.html" title="enum wasmtime_environ::RelocationTarget">RelocationTarget</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>,
    ) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Vec.html" title="struct wasmtime_environ::prelude::Vec">Vec</a>&lt;(<a class="struct" href="../object/write/struct.SymbolId.html" title="struct object::write::SymbolId">SymbolId</a>, <a class="struct" href="struct.FunctionLoc.html" title="struct wasmtime_environ::FunctionLoc">FunctionLoc</a>)&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.triple" class="fn">triple</a>(&amp;self) -&gt; &amp;<a class="struct" href="../target_lexicon/triple/struct.Triple.html" title="struct target_lexicon::triple::Triple">Triple</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.flags" class="fn">flags</a>(&amp;self) -&gt; <a class="struct" href="prelude/struct.Vec.html" title="struct wasmtime_environ::prelude::Vec">Vec</a>&lt;(&amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>, <a class="enum" href="enum.FlagValue.html" title="enum wasmtime_environ::FlagValue">FlagValue</a>&lt;'static&gt;)&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.isa_flags" class="fn">isa_flags</a>(&amp;self) -&gt; <a class="struct" href="prelude/struct.Vec.html" title="struct wasmtime_environ::prelude::Vec">Vec</a>&lt;(&amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>, <a class="enum" href="enum.FlagValue.html" title="enum wasmtime_environ::FlagValue">FlagValue</a>&lt;'static&gt;)&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_branch_protection_enabled" class="fn">is_branch_protection_enabled</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.append_dwarf" class="fn">append_dwarf</a>&lt;'a&gt;(
        &amp;self,
        obj: &amp;mut <a class="struct" href="../object/write/struct.Object.html" title="struct object::write::Object">Object</a>&lt;'_&gt;,
        translations: &amp;'a <a class="struct" href="struct.PrimaryMap.html" title="struct wasmtime_environ::PrimaryMap">PrimaryMap</a>&lt;<a class="struct" href="struct.StaticModuleIndex.html" title="struct wasmtime_environ::StaticModuleIndex">StaticModuleIndex</a>, <a class="struct" href="struct.ModuleTranslation.html" title="struct wasmtime_environ::ModuleTranslation">ModuleTranslation</a>&lt;'a&gt;&gt;,
        get_func: &amp;'a dyn <a class="trait" href="__core/ops/trait.Fn.html" title="trait wasmtime_environ::__core::ops::Fn">Fn</a>(<a class="struct" href="struct.StaticModuleIndex.html" title="struct wasmtime_environ::StaticModuleIndex">StaticModuleIndex</a>, <a class="struct" href="struct.DefinedFuncIndex.html" title="struct wasmtime_environ::DefinedFuncIndex">DefinedFuncIndex</a>) -&gt; (<a class="struct" href="../object/write/struct.SymbolId.html" title="struct object::write::SymbolId">SymbolId</a>, &amp;'a (dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>)),
        dwarf_package_bytes: <a class="enum" href="__core/option/enum.Option.html" title="enum wasmtime_environ::__core::option::Option">Option</a>&lt;&amp;'a [<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u8.html">u8</a>]&gt;,
        tunables: &amp;'a <a class="struct" href="struct.Tunables.html" title="struct wasmtime_environ::Tunables">Tunables</a>,
    ) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;;

    // Provided methods
    fn <a href="#method.object" class="fn">object</a>(&amp;self, kind: <a class="enum" href="enum.ObjectKind.html" title="enum wasmtime_environ::ObjectKind">ObjectKind</a>) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="../object/write/struct.Object.html" title="struct object::write::Object">Object</a>&lt;'static&gt;&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.page_size_align" class="fn">page_size_align</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u64.html">u64</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.create_systemv_cie" class="fn">create_systemv_cie</a>(&amp;self) -&gt; <a class="enum" href="__core/option/enum.Option.html" title="enum wasmtime_environ::__core::option::Option">Option</a>&lt;<a class="struct" href="../gimli/write/cfi/struct.CommonInformationEntry.html" title="struct gimli::write::cfi::CommonInformationEntry">CommonInformationEntry</a>&gt; { ... }
</details>}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An implementation of a compiler which can compile WebAssembly functions to
machine code and perform other miscellaneous tasks needed by the JIT runtime.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.compile_function" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#192-198">Source</a><h4 class="code-header">fn <a href="#tymethod.compile_function" class="fn">compile_function</a>(
    &amp;self,
    translation: &amp;<a class="struct" href="struct.ModuleTranslation.html" title="struct wasmtime_environ::ModuleTranslation">ModuleTranslation</a>&lt;'_&gt;,
    index: <a class="struct" href="struct.DefinedFuncIndex.html" title="struct wasmtime_environ::DefinedFuncIndex">DefinedFuncIndex</a>,
    data: <a class="struct" href="struct.FunctionBodyData.html" title="struct wasmtime_environ::FunctionBodyData">FunctionBodyData</a>&lt;'_&gt;,
    types: &amp;<a class="struct" href="struct.ModuleTypesBuilder.html" title="struct wasmtime_environ::ModuleTypesBuilder">ModuleTypesBuilder</a>,
) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;(<a class="struct" href="struct.WasmFunctionInfo.html" title="struct wasmtime_environ::WasmFunctionInfo">WasmFunctionInfo</a>, <a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;), <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;</h4></section></summary><div class="docblock"><p>Compiles the function <code>index</code> within <code>translation</code>.</p>
<p>The body of the function is available in <code>data</code> and configuration
values are also passed in via <code>tunables</code>. Type information in
<code>translation</code> is all relative to <code>types</code>.</p>
<p>This function returns a tuple:</p>
<ol>
<li>Metadata about the wasm function itself.</li>
<li>The function itself, as an <code>Any</code> to get downcasted later when passed
to <code>append_code</code>.</li>
</ol>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.compile_array_to_wasm_trampoline" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#205-210">Source</a><h4 class="code-header">fn <a href="#tymethod.compile_array_to_wasm_trampoline" class="fn">compile_array_to_wasm_trampoline</a>(
    &amp;self,
    translation: &amp;<a class="struct" href="struct.ModuleTranslation.html" title="struct wasmtime_environ::ModuleTranslation">ModuleTranslation</a>&lt;'_&gt;,
    types: &amp;<a class="struct" href="struct.ModuleTypesBuilder.html" title="struct wasmtime_environ::ModuleTypesBuilder">ModuleTypesBuilder</a>,
    index: <a class="struct" href="struct.DefinedFuncIndex.html" title="struct wasmtime_environ::DefinedFuncIndex">DefinedFuncIndex</a>,
) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;, <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;</h4></section></summary><div class="docblock"><p>Compile a trampoline for an array-call host function caller calling the
<code>index</code>th Wasm function.</p>
<p>The trampoline should save the necessary state to record the
host-to-Wasm transition (e.g. registers used for fast stack walking).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.compile_wasm_to_array_trampoline" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#217-220">Source</a><h4 class="code-header">fn <a href="#tymethod.compile_wasm_to_array_trampoline" class="fn">compile_wasm_to_array_trampoline</a>(
    &amp;self,
    wasm_func_ty: &amp;<a class="struct" href="struct.WasmFuncType.html" title="struct wasmtime_environ::WasmFuncType">WasmFuncType</a>,
) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;, <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;</h4></section></summary><div class="docblock"><p>Compile a trampoline for a Wasm caller calling a array callee with the
given signature.</p>
<p>The trampoline should save the necessary state to record the
Wasm-to-host transition (e.g. registers used for fast stack walking).</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.compile_wasm_to_builtin" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#231-234">Source</a><h4 class="code-header">fn <a href="#tymethod.compile_wasm_to_builtin" class="fn">compile_wasm_to_builtin</a>(
    &amp;self,
    index: <a class="struct" href="struct.BuiltinFunctionIndex.html" title="struct wasmtime_environ::BuiltinFunctionIndex">BuiltinFunctionIndex</a>,
) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;, <a class="enum" href="enum.CompileError.html" title="enum wasmtime_environ::CompileError">CompileError</a>&gt;</h4></section></summary><div class="docblock"><p>Creates a tramopline that can be used to call Wasmtime’s implementation
of the builtin function specified by <code>index</code>.</p>
<p>The trampoline created can technically have any ABI but currently has
the native ABI. This will then perform all the necessary duties of an
exit trampoline from wasm and then perform the actual dispatch to the
builtin function. Builtin functions in Wasmtime are stored in an array
in all <code>VMContext</code> pointers, so the call to the host is an indirect
call.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.compiled_function_relocation_targets" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#238-241">Source</a><h4 class="code-header">fn <a href="#tymethod.compiled_function_relocation_targets" class="fn">compiled_function_relocation_targets</a>&lt;'a&gt;(
    &amp;'a self,
    func: &amp;'a dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a>,
) -&gt; <a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/iter/trait.Iterator.html" title="trait wasmtime_environ::__core::iter::Iterator">Iterator</a>&lt;Item = <a class="enum" href="enum.RelocationTarget.html" title="enum wasmtime_environ::RelocationTarget">RelocationTarget</a>&gt; + 'a&gt;</h4></section></summary><div class="docblock"><p>Returns the list of relocations required for a function from one of the
previous <code>compile_*</code> functions above.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.append_code" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#270-275">Source</a><h4 class="code-header">fn <a href="#tymethod.append_code" class="fn">append_code</a>(
    &amp;self,
    obj: &amp;mut <a class="struct" href="../object/write/struct.Object.html" title="struct object::write::Object">Object</a>&lt;'static&gt;,
    funcs: &amp;[(<a class="struct" href="prelude/struct.String.html" title="struct wasmtime_environ::prelude::String">String</a>, <a class="struct" href="prelude/struct.Box.html" title="struct wasmtime_environ::prelude::Box">Box</a>&lt;dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>&gt;)],
    resolve_reloc: &amp;dyn <a class="trait" href="__core/ops/trait.Fn.html" title="trait wasmtime_environ::__core::ops::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>, <a class="enum" href="enum.RelocationTarget.html" title="enum wasmtime_environ::RelocationTarget">RelocationTarget</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>,
) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="prelude/struct.Vec.html" title="struct wasmtime_environ::prelude::Vec">Vec</a>&lt;(<a class="struct" href="../object/write/struct.SymbolId.html" title="struct object::write::SymbolId">SymbolId</a>, <a class="struct" href="struct.FunctionLoc.html" title="struct wasmtime_environ::FunctionLoc">FunctionLoc</a>)&gt;&gt;</h4></section></summary><div class="docblock"><p>Appends a list of compiled functions to an in-memory object.</p>
<p>This function will receive the same <code>Box&lt;dyn Any&gt;</code> produced as part of
compilation from functions like <code>compile_function</code>,
<code>compile_host_to_wasm_trampoline</code>, and other component-related shims.
Internally this will take all of these functions and add information to
the object such as:</p>
<ul>
<li>Compiled code in a <code>.text</code> section</li>
<li>Unwind information in Wasmtime-specific sections</li>
<li>Relocations, if necessary, for the text section</li>
</ul>
<p>Each function is accompanied with its desired symbol name and the return
value of this function is the symbol for each function as well as where
each function was placed within the object.</p>
<p>The <code>resolve_reloc</code> argument is intended to resolving relocations
between function, chiefly resolving intra-module calls within one core
wasm module. The closure here takes two arguments:</p>
<ol>
<li>
<p>First, the index within <code>funcs</code> that is being resolved,</p>
</li>
<li>
<p>and next the <code>RelocationTarget</code> which is the relocation target to
resolve.</p>
</li>
</ol>
<p>The return value is an index within <code>funcs</code> that the relocation points
to.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.triple" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#317">Source</a><h4 class="code-header">fn <a href="#tymethod.triple" class="fn">triple</a>(&amp;self) -&gt; &amp;<a class="struct" href="../target_lexicon/triple/struct.Triple.html" title="struct target_lexicon::triple::Triple">Triple</a></h4></section></summary><div class="docblock"><p>Returns the target triple that this compiler is compiling for.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.flags" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#341">Source</a><h4 class="code-header">fn <a href="#tymethod.flags" class="fn">flags</a>(&amp;self) -&gt; <a class="struct" href="prelude/struct.Vec.html" title="struct wasmtime_environ::prelude::Vec">Vec</a>&lt;(&amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>, <a class="enum" href="enum.FlagValue.html" title="enum wasmtime_environ::FlagValue">FlagValue</a>&lt;'static&gt;)&gt;</h4></section></summary><div class="docblock"><p>Returns a list of configured settings for this compiler.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.isa_flags" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#344">Source</a><h4 class="code-header">fn <a href="#tymethod.isa_flags" class="fn">isa_flags</a>(&amp;self) -&gt; <a class="struct" href="prelude/struct.Vec.html" title="struct wasmtime_environ::prelude::Vec">Vec</a>&lt;(&amp;'static <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>, <a class="enum" href="enum.FlagValue.html" title="enum wasmtime_environ::FlagValue">FlagValue</a>&lt;'static&gt;)&gt;</h4></section></summary><div class="docblock"><p>Same as <a href="trait.Compiler.html#tymethod.flags" title="method wasmtime_environ::Compiler::flags"><code>Compiler::flags</code></a>, but ISA-specific (a cranelift-ism)</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.is_branch_protection_enabled" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#347">Source</a><h4 class="code-header">fn <a href="#tymethod.is_branch_protection_enabled" class="fn">is_branch_protection_enabled</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Get a flag indicating whether branch protection is enabled.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.append_dwarf" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#360-370">Source</a><h4 class="code-header">fn <a href="#tymethod.append_dwarf" class="fn">append_dwarf</a>&lt;'a&gt;(
    &amp;self,
    obj: &amp;mut <a class="struct" href="../object/write/struct.Object.html" title="struct object::write::Object">Object</a>&lt;'_&gt;,
    translations: &amp;'a <a class="struct" href="struct.PrimaryMap.html" title="struct wasmtime_environ::PrimaryMap">PrimaryMap</a>&lt;<a class="struct" href="struct.StaticModuleIndex.html" title="struct wasmtime_environ::StaticModuleIndex">StaticModuleIndex</a>, <a class="struct" href="struct.ModuleTranslation.html" title="struct wasmtime_environ::ModuleTranslation">ModuleTranslation</a>&lt;'a&gt;&gt;,
    get_func: &amp;'a dyn <a class="trait" href="__core/ops/trait.Fn.html" title="trait wasmtime_environ::__core::ops::Fn">Fn</a>(<a class="struct" href="struct.StaticModuleIndex.html" title="struct wasmtime_environ::StaticModuleIndex">StaticModuleIndex</a>, <a class="struct" href="struct.DefinedFuncIndex.html" title="struct wasmtime_environ::DefinedFuncIndex">DefinedFuncIndex</a>) -&gt; (<a class="struct" href="../object/write/struct.SymbolId.html" title="struct object::write::SymbolId">SymbolId</a>, &amp;'a (dyn <a class="trait" href="__core/any/trait.Any.html" title="trait wasmtime_environ::__core::any::Any">Any</a> + <a class="trait" href="__core/marker/trait.Send.html" title="trait wasmtime_environ::__core::marker::Send">Send</a>)),
    dwarf_package_bytes: <a class="enum" href="__core/option/enum.Option.html" title="enum wasmtime_environ::__core::option::Option">Option</a>&lt;&amp;'a [<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u8.html">u8</a>]&gt;,
    tunables: &amp;'a <a class="struct" href="struct.Tunables.html" title="struct wasmtime_environ::Tunables">Tunables</a>,
) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Appends generated DWARF sections to the <code>obj</code> specified.</p>
<p>The <code>translations</code> track all compiled functions and <code>get_func</code> can be
used to acquire the metadata for a particular function within a module.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.object" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#283-314">Source</a><h4 class="code-header">fn <a href="#method.object" class="fn">object</a>(&amp;self, kind: <a class="enum" href="enum.ObjectKind.html" title="enum wasmtime_environ::ObjectKind">ObjectKind</a>) -&gt; <a class="type" href="../anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="../object/write/struct.Object.html" title="struct object::write::Object">Object</a>&lt;'static&gt;&gt;</h4></section></summary><div class="docblock"><p>Creates a new <code>Object</code> file which is used to build the results of a
compilation into.</p>
<p>The returned object file will have an appropriate
architecture/endianness for <code>self.triple()</code>, but at this time it is
always an ELF file, regardless of target platform.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.page_size_align" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#323-338">Source</a><h4 class="code-header">fn <a href="#method.page_size_align" class="fn">page_size_align</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u64.html">u64</a></h4></section></summary><div class="docblock"><p>Returns the alignment necessary to align values to the page size of the
compilation target. Note that this may be an upper-bound where the
alignment is larger than necessary for some platforms since it may
depend on the platform’s runtime configuration.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.create_systemv_cie" class="method"><a class="src rightside" href="../src/wasmtime_environ/compile/mod.rs.html#375-378">Source</a><h4 class="code-header">fn <a href="#method.create_systemv_cie" class="fn">create_systemv_cie</a>(&amp;self) -&gt; <a class="enum" href="__core/option/enum.Option.html" title="enum wasmtime_environ::__core::option::Option">Option</a>&lt;<a class="struct" href="../gimli/write/cfi/struct.CommonInformationEntry.html" title="struct gimli::write::cfi::CommonInformationEntry">CommonInformationEntry</a>&gt;</h4></section></summary><div class="docblock"><p>Creates a new System V Common Information Entry for the ISA.</p>
<p>Returns <code>None</code> if the ISA does not support System V unwind information.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/wasmtime_environ/compile/trait.Compiler.js" async></script></section></div></main></body></html>