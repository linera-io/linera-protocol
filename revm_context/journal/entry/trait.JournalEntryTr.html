<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait for tracking and reverting state changes in the EVM. Journal entry contains information about state changes that can be reverted."><title>JournalEntryTr in revm_context::journal::entry - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="revm_context" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../revm_context/index.html">revm_<wbr>context</a><span class="version">5.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Journal<wbr>Entry<wbr>Tr</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.account_created" title="account_created">account_created</a></li><li><a href="#tymethod.account_destroyed" title="account_destroyed">account_destroyed</a></li><li><a href="#tymethod.account_touched" title="account_touched">account_touched</a></li><li><a href="#tymethod.account_warmed" title="account_warmed">account_warmed</a></li><li><a href="#tymethod.balance_transfer" title="balance_transfer">balance_transfer</a></li><li><a href="#tymethod.code_changed" title="code_changed">code_changed</a></li><li><a href="#tymethod.nonce_changed" title="nonce_changed">nonce_changed</a></li><li><a href="#tymethod.revert" title="revert">revert</a></li><li><a href="#tymethod.storage_changed" title="storage_changed">storage_changed</a></li><li><a href="#tymethod.storage_warmed" title="storage_warmed">storage_warmed</a></li><li><a href="#tymethod.transient_storage_changed" title="transient_storage_changed">transient_storage_changed</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In revm_<wbr>context::<wbr>journal::<wbr>entry</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">revm_context</a>::<wbr><a href="../index.html">journal</a>::<wbr><a href="index.html">entry</a></div><h1>Trait <span class="trait">JournalEntryTr</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/revm_context/journal/entry.rs.html#12-81">Source</a> </span></div><pre class="rust item-decl"><code>pub trait JournalEntryTr {
    // Required methods
    fn <a href="#tymethod.account_warmed" class="fn">account_warmed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.account_destroyed" class="fn">account_destroyed</a>(
        address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
        target: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
        was_destroyed: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>,
        had_balance: <a class="type" href="../../../alloy_primitives/aliases/type.U256.html" title="type alloy_primitives::aliases::U256">U256</a>,
    ) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.account_touched" class="fn">account_touched</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.balance_transfer" class="fn">balance_transfer</a>(from: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>, to: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>, balance: <a class="type" href="../../../alloy_primitives/aliases/type.U256.html" title="type alloy_primitives::aliases::U256">U256</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.nonce_changed" class="fn">nonce_changed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.account_created" class="fn">account_created</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.storage_changed" class="fn">storage_changed</a>(
        address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
        key: <a class="type" href="../../../revm_primitives/type.StorageKey.html" title="type revm_primitives::StorageKey">StorageKey</a>,
        had_value: <a class="type" href="../../../revm_primitives/type.StorageValue.html" title="type revm_primitives::StorageValue">StorageValue</a>,
    ) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.storage_warmed" class="fn">storage_warmed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>, key: <a class="type" href="../../../revm_primitives/type.StorageKey.html" title="type revm_primitives::StorageKey">StorageKey</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.transient_storage_changed" class="fn">transient_storage_changed</a>(
        address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
        key: <a class="type" href="../../../revm_primitives/type.StorageKey.html" title="type revm_primitives::StorageKey">StorageKey</a>,
        had_value: <a class="type" href="../../../revm_primitives/type.StorageValue.html" title="type revm_primitives::StorageValue">StorageValue</a>,
    ) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.code_changed" class="fn">code_changed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.revert" class="fn">revert</a>(
        self,
        state: &amp;mut <a class="type" href="../../../revm_state/types/type.EvmState.html" title="type revm_state::types::EvmState">EvmState</a>,
        transient_storage: &amp;mut <a class="type" href="../../../revm_state/types/type.TransientStorage.html" title="type revm_state::types::TransientStorage">TransientStorage</a>,
        is_spurious_dragon_enabled: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>,
    );
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait for tracking and reverting state changes in the EVM.
Journal entry contains information about state changes that can be reverted.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.account_warmed" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#14">Source</a><h4 class="code-header">fn <a href="#tymethod.account_warmed" class="fn">account_warmed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when an account is accessed and marked as “warm” for gas metering</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.account_destroyed" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#20-25">Source</a><h4 class="code-header">fn <a href="#tymethod.account_destroyed" class="fn">account_destroyed</a>(
    address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
    target: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
    was_destroyed: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>,
    had_balance: <a class="type" href="../../../alloy_primitives/aliases/type.U256.html" title="type alloy_primitives::aliases::U256">U256</a>,
) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when an account is destroyed via SELFDESTRUCT
Records the target address that received the destroyed account’s balance,
whether the account was already destroyed, and its balance before destruction
on revert, the balance is transferred back to the original account</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.account_touched" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#29">Source</a><h4 class="code-header">fn <a href="#tymethod.account_touched" class="fn">account_touched</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when an account is “touched” - accessed in a way that may require saving it.
If account is empty and touch it will be removed from the state (EIP-161 state clear EIP)</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.balance_transfer" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#32">Source</a><h4 class="code-header">fn <a href="#tymethod.balance_transfer" class="fn">balance_transfer</a>(from: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>, to: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>, balance: <a class="type" href="../../../alloy_primitives/aliases/type.U256.html" title="type alloy_primitives::aliases::U256">U256</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for a balance transfer between accounts</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.nonce_changed" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#35">Source</a><h4 class="code-header">fn <a href="#tymethod.nonce_changed" class="fn">nonce_changed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when an account’s nonce is incremented.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.account_created" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#38">Source</a><h4 class="code-header">fn <a href="#tymethod.account_created" class="fn">account_created</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when a new account is created</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.storage_changed" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#42">Source</a><h4 class="code-header">fn <a href="#tymethod.storage_changed" class="fn">storage_changed</a>(
    address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
    key: <a class="type" href="../../../revm_primitives/type.StorageKey.html" title="type revm_primitives::StorageKey">StorageKey</a>,
    had_value: <a class="type" href="../../../revm_primitives/type.StorageValue.html" title="type revm_primitives::StorageValue">StorageValue</a>,
) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when a storage slot is modified
Records the previous value for reverting</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.storage_warmed" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#46">Source</a><h4 class="code-header">fn <a href="#tymethod.storage_warmed" class="fn">storage_warmed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>, key: <a class="type" href="../../../revm_primitives/type.StorageKey.html" title="type revm_primitives::StorageKey">StorageKey</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when a storage slot is accessed and marked as “warm” for gas metering
This is called with SLOAD opcode.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.transient_storage_changed" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#50-54">Source</a><h4 class="code-header">fn <a href="#tymethod.transient_storage_changed" class="fn">transient_storage_changed</a>(
    address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>,
    key: <a class="type" href="../../../revm_primitives/type.StorageKey.html" title="type revm_primitives::StorageKey">StorageKey</a>,
    had_value: <a class="type" href="../../../revm_primitives/type.StorageValue.html" title="type revm_primitives::StorageValue">StorageValue</a>,
) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when a transient storage slot is modified (EIP-1153)
Records the previous value for reverting</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.code_changed" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#57">Source</a><h4 class="code-header">fn <a href="#tymethod.code_changed" class="fn">code_changed</a>(address: <a class="struct" href="../../../alloy_primitives/bits/address/struct.Address.html" title="struct alloy_primitives::bits::address::Address">Address</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a journal entry for when an account’s code is modified</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.revert" class="method"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#75-80">Source</a><h4 class="code-header">fn <a href="#tymethod.revert" class="fn">revert</a>(
    self,
    state: &amp;mut <a class="type" href="../../../revm_state/types/type.EvmState.html" title="type revm_state::types::EvmState">EvmState</a>,
    transient_storage: &amp;mut <a class="type" href="../../../revm_state/types/type.TransientStorage.html" title="type revm_state::types::TransientStorage">TransientStorage</a>,
    is_spurious_dragon_enabled: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>,
)</h4></section></summary><div class="docblock"><p>Reverts the state change recorded by this journal entry</p>
<p>More information on what is reverted can be found in <a href="enum.JournalEntry.html" title="enum revm_context::journal::entry::JournalEntry"><code>JournalEntry</code></a> enum.</p>
<h5 id="notes"><a class="doc-anchor" href="#notes">§</a>Notes</h5>
<p>The spurious dragon flag is used to skip revertion 0x000..0003 precompile. This
Behaviour is special and it caused by bug in Geth and Parity that is explained in <a href="https://github.com/ethereum/EIPs/issues/716">PR#716</a>.</p>
<p>From yellow paper:</p>
<div class="example-wrap"><pre class="language-text"><code>K.1. Deletion of an Account Despite Out-of-gas. At block 2675119, in the transaction 0xcf416c536ec1a19ed1fb89e
4ec7ffb3cf73aa413b3aa9b77d60e4fd81a4296ba, an account at address 0x03 was called and an out-of-gas occurred during
the call. Against the equation (209), this added 0x03 in the set of touched addresses, and this transaction turned σ[0x03]
into ∅.</code></pre></div></div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.86.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-JournalEntryTr-for-JournalEntry" class="impl"><a class="src rightside" href="../../../src/revm_context/journal/entry.rs.html#181-342">Source</a><a href="#impl-JournalEntryTr-for-JournalEntry" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.JournalEntryTr.html" title="trait revm_context::journal::entry::JournalEntryTr">JournalEntryTr</a> for <a class="enum" href="enum.JournalEntry.html" title="enum revm_context::journal::entry::JournalEntry">JournalEntry</a></h3></section></div><script src="../../../trait.impl/revm_context/journal/entry/trait.JournalEntryTr.js" async></script></section></div></main></body></html>