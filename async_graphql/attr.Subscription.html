<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Define a GraphQL subscription"><title>Subscription in async_graphql - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="async_graphql" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc attr"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../async_graphql/index.html">async_<wbr>graphql</a><span class="version">7.0.17</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Subscription</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#macro-attributes" title="Macro attributes">Macro attributes</a></li><li><a href="#field-attributes" title="Field attributes">Field attributes</a></li><li><a href="#field-argument-attributes" title="Field argument attributes">Field argument attributes</a></li><li><a href="#examples" title="Examples">Examples</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate async_<wbr>graphql</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">async_graphql</a></div><h1>Attribute Macro <span class="attr">Subscription</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/async_graphql_derive/lib.rs.html#139">Source</a> </span></div><pre class="rust item-decl"><code>#[Subscription]</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Define a GraphQL subscription</p>
<p><em><a href="https://async-graphql.github.io/async-graphql/en/subscription.html">See also the Book</a>.</em></p>
<p>The field function is a synchronization function that performs filtering. When true is returned, the message is pushed to the client.
The second parameter is the type of the field.
Starting with the third parameter is one or more filtering conditions, The filter condition is the parameter of the field.
The filter function should be synchronous.</p>
<h2 id="macro-attributes"><a class="doc-anchor" href="#macro-attributes">§</a>Macro attributes</h2><div><table><thead><tr><th>Attribute</th><th>description</th><th>Type</th><th>Optional</th></tr></thead><tbody>
<tr><td>name</td><td>Object name</td><td>string</td><td>Y</td></tr>
<tr><td>name_type</td><td>If <code>true</code>, the object name will be specified from <a href="https://docs.rs/async-graphql/latest/async_graphql/trait.TypeName.html"><code>async_graphql::TypeName</code></a> trait</td><td>bool</td><td>Y</td></tr>
<tr><td>rename_fields</td><td>Rename all the fields according to the given case convention. The possible values are “lowercase”, “UPPERCASE”, “PascalCase”, “camelCase”, “snake_case”, “SCREAMING_SNAKE_CASE”.</td><td>string</td><td>Y</td></tr>
<tr><td>rename_args</td><td>Rename all the arguments according to the given case convention. The possible values are “lowercase”, “UPPERCASE”, “PascalCase”, “camelCase”, “snake_case”, “SCREAMING_SNAKE_CASE”.</td><td>string</td><td>Y</td></tr>
<tr><td>extends</td><td>Add fields to an entity that’s defined in another service</td><td>bool</td><td>Y</td></tr>
<tr><td>visible</td><td>If <code>false</code>, it will not be displayed in introspection. <em><a href="https://async-graphql.github.io/async-graphql/en/visibility.html">See also the Book</a>.</em></td><td>bool</td><td>Y</td></tr>
<tr><td>visible</td><td>Call the specified function. If the return value is <code>false</code>, it will not be displayed in introspection.</td><td>string</td><td>Y</td></tr>
<tr><td>use_type_description</td><td>Specifies that the description of the type is on the type declaration. <a href=""><code>Description</code></a>(derive.Description.html)</td><td>bool</td><td>Y</td></tr>
<tr><td>guard</td><td>Field of guard <em><a href="https://async-graphql.github.io/async-graphql/en/field_guard.html">See also the Book</a></em></td><td>string</td><td>Y</td></tr>
<tr><td>directives</td><td>Directives</td><td>expr</td><td>Y</td></tr>
</tbody></table>
</div><h2 id="field-attributes"><a class="doc-anchor" href="#field-attributes">§</a>Field attributes</h2><div><table><thead><tr><th>Attribute</th><th>description</th><th>Type</th><th>Optional</th></tr></thead><tbody>
<tr><td>name</td><td>Field name</td><td>string</td><td>Y</td></tr>
<tr><td>deprecation</td><td>Field deprecated</td><td>bool</td><td>Y</td></tr>
<tr><td>deprecation</td><td>Field deprecation reason</td><td>string</td><td>Y</td></tr>
<tr><td>guard</td><td>Field of guard <em><a href="https://async-graphql.github.io/async-graphql/en/field_guard.html">See also the Book</a></em></td><td>string</td><td>Y</td></tr>
<tr><td>visible</td><td>If <code>false</code>, it will not be displayed in introspection. <em><a href="https://async-graphql.github.io/async-graphql/en/visibility.html">See also the Book</a>.</em></td><td>bool</td><td>Y</td></tr>
<tr><td>visible</td><td>Call the specified function. If the return value is <code>false</code>, it will not be displayed in introspection.</td><td>string</td><td>Y</td></tr>
<tr><td>complexity</td><td>Custom field complexity. <em><a href="https://async-graphql.github.io/async-graphql/en/depth_and_complexity.html">See also the Book</a>.</em></td><td>bool</td><td>Y</td></tr>
<tr><td>complexity</td><td>Custom field complexity.</td><td>string</td><td>Y</td></tr>
<tr><td>secret</td><td>Mark this field as a secret, it will not output the actual value in the log.</td><td>bool</td><td>Y</td></tr>
<tr><td>directives</td><td>Directives</td><td>expr</td><td>Y</td></tr>
</tbody></table>
</div><h2 id="field-argument-attributes"><a class="doc-anchor" href="#field-argument-attributes">§</a>Field argument attributes</h2><div><table><thead><tr><th>Attribute</th><th>description</th><th>Type</th><th>Optional</th></tr></thead><tbody>
<tr><td>name</td><td>Argument name</td><td>string</td><td>Y</td></tr>
<tr><td>desc</td><td>Argument description</td><td>string</td><td>Y</td></tr>
<tr><td>deprecation</td><td>Argument deprecation</td><td>bool</td><td>Y</td></tr>
<tr><td>deprecation</td><td>Argument deprecation reason</td><td>string</td><td>Y</td></tr>
<tr><td>default</td><td>Use <code>Default::default</code> for default value</td><td>none</td><td>Y</td></tr>
<tr><td>default</td><td>Argument default value</td><td>literal</td><td>Y</td></tr>
<tr><td>default_with</td><td>Expression to generate default value</td><td>code string</td><td>Y</td></tr>
<tr><td>validator</td><td>Input value validator <em><a href="https://async-graphql.github.io/async-graphql/en/input_value_validators.html">See also the Book</a></em></td><td>object</td><td>Y</td></tr>
<tr><td>visible</td><td>If <code>false</code>, it will not be displayed in introspection. <em><a href="https://async-graphql.github.io/async-graphql/en/visibility.html">See also the Book</a>.</em></td><td>bool</td><td>Y</td></tr>
<tr><td>visible</td><td>Call the specified function. If the return value is <code>false</code>, it will not be displayed in introspection.</td><td>string</td><td>Y</td></tr>
<tr><td>process_with</td><td>Upon successful parsing, invokes specified function. Its signature must be <code>fn(&amp;mut T)</code>.</td><td>code path</td><td>Y</td></tr>
</tbody></table>
</div><h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>async_graphql::<span class="kw-2">*</span>;
<span class="kw">use </span>futures_util::stream::{Stream, StreamExt};

<span class="kw">struct </span>Subscription;

<span class="attr">#[Subscription]
</span><span class="kw">impl </span>Subscription {
    <span class="kw">async fn </span>value(<span class="kw-2">&amp;</span><span class="self">self</span>, condition: i32) -&gt; <span class="kw">impl </span>Stream&lt;Item = i32&gt; {
        <span class="comment">// Returns the number from 0 to `condition`.
        </span>futures_util::stream::iter(<span class="number">0</span>..condition)
    }
}</code></pre></div>
</div></details></section></div></main></body></html>