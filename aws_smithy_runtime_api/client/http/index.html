<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="HTTP clients and connectors"><title>aws_smithy_runtime_api::client::http - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="aws_smithy_runtime_api" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../../static.files/storage-3a5871a4.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../aws_smithy_runtime_api/index.html">aws_<wbr>smithy_<wbr>runtime_<wbr>api</a><span class="version">1.8.7</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module http</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#what-is-a-connector" title="What is a connector?">What is a connector?</a></li><li><a href="#responsibilities-of-a-connector" title="Responsibilities of a connector">Responsibilities of a connector</a></li><li><a href="#the-httpclient-trait" title="The `HttpClient` trait">The <code>HttpClient</code> trait</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In aws_<wbr>smithy_<wbr>runtime_<wbr>api::<wbr>client</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">aws_smithy_runtime_api</a>::<wbr><a href="../index.html">client</a></div><h1>Module <span>http</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/aws_smithy_runtime_api/client/http.rs.html#6-315">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>HTTP clients and connectors</p>
<h2 id="what-is-a-connector"><a class="doc-anchor" href="#what-is-a-connector">§</a>What is a connector?</h2>
<p>When we talk about connectors, we are referring to the <a href="trait.HttpConnector.html" title="trait aws_smithy_runtime_api::client::http::HttpConnector"><code>HttpConnector</code></a> trait, and implementations of
that trait. This trait simply takes a HTTP request, and returns a future with the response for that
request.</p>
<p>This is slightly different from what a connector is in other libraries such as
<a href="https://crates.io/crates/hyper"><code>hyper</code></a>. In hyper 0.x, the connector is a <a href="https://crates.io/crates/tower"><code>tower</code></a> <code>Service</code> that takes a <code>Uri</code> and returns
a future with something that implements <code>AsyncRead + AsyncWrite</code>.</p>
<p>The <a href="trait.HttpConnector.html" title="trait aws_smithy_runtime_api::client::http::HttpConnector"><code>HttpConnector</code></a> is designed to be a layer on top of
whole HTTP libraries, such as hyper, which allows Smithy clients to be agnostic to the underlying HTTP
transport layer. This also makes it easy to write tests with a fake HTTP connector, and several
such test connector implementations are available in <a href="https://crates.io/crates/aws-smithy-runtime"><code>aws-smithy-runtime</code></a>
with the <code>test-util</code> feature enabled.</p>
<h2 id="responsibilities-of-a-connector"><a class="doc-anchor" href="#responsibilities-of-a-connector">§</a>Responsibilities of a connector</h2>
<p>A connector primarily makes HTTP requests, but is also the place where connect and read timeouts are
implemented. The <code>HyperConnector</code> in <a href="https://crates.io/crates/aws-smithy-runtime"><code>aws-smithy-runtime</code></a> is an example where timeouts are implemented
as part of the connector.</p>
<p>Connectors are also responsible for DNS lookup, TLS, connection reuse, pooling, and eviction.
The Smithy clients have no knowledge of such concepts.</p>
<h2 id="the-httpclient-trait"><a class="doc-anchor" href="#the-httpclient-trait">§</a>The <a href="trait.HttpClient.html" title="trait aws_smithy_runtime_api::client::http::HttpClient"><code>HttpClient</code></a> trait</h2>
<p>Connectors allow us to make requests, but we need a layer on top of connectors so that we can handle
varying connector settings. For example, say we configure some default HTTP connect/read timeouts on
Client, and then configure some override connect/read timeouts for a specific operation. These timeouts
ultimately are part of the connector, so the same connector can’t be reused for the two different sets
of timeouts. Thus, the <a href="trait.HttpClient.html" title="trait aws_smithy_runtime_api::client::http::HttpClient"><code>HttpClient</code></a> implementation is responsible for managing multiple connectors
with varying config. Some example configs that can impact which connector is used:</p>
<ul>
<li>HTTP protocol versions</li>
<li>TLS settings</li>
<li>Timeouts</li>
</ul>
<p>Some of these aren’t implemented yet, but they will appear in the <a href="struct.HttpConnectorSettings.html" title="struct aws_smithy_runtime_api::client::http::HttpConnectorSettings"><code>HttpConnectorSettings</code></a> struct
once they are.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.HttpConnectorFuture.html" title="struct aws_smithy_runtime_api::client::http::HttpConnectorFuture">Http<wbr>Connector<wbr>Future</a></dt><dd>Future for <a href="trait.HttpConnector.html#tymethod.call" title="method aws_smithy_runtime_api::client::http::HttpConnector::call"><code>HttpConnector::call</code></a>.</dd><dt><a class="struct" href="struct.HttpConnectorSettings.html" title="struct aws_smithy_runtime_api::client::http::HttpConnectorSettings">Http<wbr>Connector<wbr>Settings</a></dt><dd>Settings for HTTP Connectors</dd><dt><a class="struct" href="struct.HttpConnectorSettingsBuilder.html" title="struct aws_smithy_runtime_api::client::http::HttpConnectorSettingsBuilder">Http<wbr>Connector<wbr>Settings<wbr>Builder</a></dt><dd>Builder for <a href="struct.HttpConnectorSettings.html" title="struct aws_smithy_runtime_api::client::http::HttpConnectorSettings"><code>HttpConnectorSettings</code></a>.</dd><dt><a class="struct" href="struct.SharedHttpClient.html" title="struct aws_smithy_runtime_api::client::http::SharedHttpClient">Shared<wbr>Http<wbr>Client</a></dt><dd>Shared HTTP client for use across multiple clients and requests.</dd><dt><a class="struct" href="struct.SharedHttpConnector.html" title="struct aws_smithy_runtime_api::client::http::SharedHttpConnector">Shared<wbr>Http<wbr>Connector</a></dt><dd>A shared <a href="trait.HttpConnector.html" title="trait aws_smithy_runtime_api::client::http::HttpConnector"><code>HttpConnector</code></a> implementation.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.HttpClient.html" title="trait aws_smithy_runtime_api::client::http::HttpClient">Http<wbr>Client</a></dt><dd>HTTP client abstraction.</dd><dt><a class="trait" href="trait.HttpConnector.html" title="trait aws_smithy_runtime_api::client::http::HttpConnector">Http<wbr>Connector</a></dt><dd>Trait with a <code>call</code> function that asynchronously converts a request into a response.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.http_client_fn.html" title="fn aws_smithy_runtime_api::client::http::http_client_fn">http_<wbr>client_<wbr>fn</a></dt><dd>Returns a <a href="struct.SharedHttpClient.html" title="struct aws_smithy_runtime_api::client::http::SharedHttpClient"><code>SharedHttpClient</code></a> that calls the given <code>connector</code> function to select a HTTP connector.</dd></dl></section></div></main></body></html>