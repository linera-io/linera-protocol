---
Account:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - owner:
        OPTION:
          TYPENAME: Owner
Amount:
  NEWTYPESTRUCT: U64
ApplicationDescription:
  ENUM:
    0:
      System: UNIT
    1:
      User:
        NEWTYPE:
          TYPENAME: UserApplicationDescription
ApplicationId:
  ENUM:
    0:
      System: UNIT
    1:
      User:
        NEWTYPE:
          TYPENAME: UserApplicationId
Balance:
  NEWTYPESTRUCT: U128
Block:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - epoch:
        TYPENAME: Epoch
    - incoming_messages:
        SEQ:
          TYPENAME: Message
    - operations:
        SEQ:
          TUPLE:
            - TYPENAME: ApplicationId
            - TYPENAME: Operation
    - height:
        TYPENAME: BlockHeight
    - timestamp:
        TYPENAME: Timestamp
    - authenticated_signer:
        OPTION:
          TYPENAME: Owner
    - previous_block_hash:
        OPTION:
          TYPENAME: CryptoHash
BlockAndRound:
  STRUCT:
    - block:
        TYPENAME: Block
    - round:
        TYPENAME: RoundNumber
BlockHeight:
  NEWTYPESTRUCT: U64
BlockHeightRange:
  STRUCT:
    - start:
        TYPENAME: BlockHeight
    - limit:
        OPTION: U64
BlockProposal:
  STRUCT:
    - content:
        TYPENAME: BlockAndRound
    - owner:
        TYPENAME: Owner
    - signature:
        TYPENAME: Signature
Bytecode:
  STRUCT:
    - bytes: BYTES
BytecodeId:
  NEWTYPESTRUCT:
    TYPENAME: EffectId
BytecodeLocation:
  STRUCT:
    - certificate_hash:
        TYPENAME: CryptoHash
    - chain_id:
        TYPENAME: ChainId
    - height:
        TYPENAME: BlockHeight
    - operation_index: U64
Certificate:
  STRUCT:
    - value:
        TYPENAME: Value
    - signatures:
        SEQ:
          TUPLE:
            - TYPENAME: ValidatorName
            - TYPENAME: Signature
ChainDescription:
  ENUM:
    0:
      Root:
        NEWTYPE: U64
    1:
      Child:
        NEWTYPE:
          TYPENAME: EffectId
ChainId:
  NEWTYPESTRUCT:
    TYPENAME: CryptoHash
ChainInfo:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - epoch:
        OPTION:
          TYPENAME: Epoch
    - description:
        OPTION:
          TYPENAME: ChainDescription
    - manager:
        TYPENAME: ChainManagerInfo
    - system_balance:
        TYPENAME: Balance
    - block_hash:
        OPTION:
          TYPENAME: CryptoHash
    - timestamp:
        TYPENAME: Timestamp
    - next_block_height:
        TYPENAME: BlockHeight
    - state_hash:
        OPTION:
          TYPENAME: CryptoHash
    - requested_committees:
        OPTION:
          MAP:
            KEY:
              TYPENAME: Epoch
            VALUE:
              TYPENAME: Committee
    - requested_pending_messages:
        SEQ:
          TYPENAME: Message
    - requested_sent_certificates:
        SEQ:
          TYPENAME: Certificate
    - count_received_certificates: U64
    - requested_received_certificates:
        SEQ:
          TYPENAME: Certificate
    - requested_blob:
        OPTION:
          TYPENAME: Value
ChainInfoQuery:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - test_next_block_height:
        OPTION:
          TYPENAME: BlockHeight
    - request_committees: BOOL
    - request_pending_messages: BOOL
    - request_sent_certificates_in_range:
        OPTION:
          TYPENAME: BlockHeightRange
    - request_received_certificates_excluding_first_nth:
        OPTION: U64
    - request_manager_values: BOOL
    - request_blob:
        OPTION:
          TYPENAME: CryptoHash
ChainInfoResponse:
  STRUCT:
    - info:
        TYPENAME: ChainInfo
    - signature:
        OPTION:
          TYPENAME: Signature
ChainManagerInfo:
  ENUM:
    0:
      None: UNIT
    1:
      Single:
        NEWTYPE:
          TYPENAME: SingleOwnerManagerInfo
    2:
      Multi:
        NEWTYPE:
          TYPENAME: MultiOwnerManagerInfo
ChannelId:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - name:
        TYPENAME: ChannelName
ChannelName:
  NEWTYPESTRUCT: BYTES
Committee:
  STRUCT:
    - validators:
        MAP:
          KEY:
            TYPENAME: ValidatorName
          VALUE:
            TYPENAME: ValidatorState
    - total_votes: U64
    - quorum_threshold: U64
    - validity_threshold: U64
CrossChainRequest:
  ENUM:
    0:
      UpdateRecipient:
        STRUCT:
          - height_map:
              SEQ:
                TUPLE:
                  - TYPENAME: ApplicationId
                  - TYPENAME: Medium
                  - SEQ:
                      TYPENAME: BlockHeight
          - sender:
              TYPENAME: ChainId
          - recipient:
              TYPENAME: ChainId
          - certificates:
              SEQ:
                TYPENAME: Certificate
    1:
      ConfirmUpdatedRecipient:
        STRUCT:
          - application_id:
              TYPENAME: ApplicationId
          - origin:
              TYPENAME: Origin
          - recipient:
              TYPENAME: ChainId
          - height:
              TYPENAME: BlockHeight
CryptoHash:
  NEWTYPESTRUCT:
    TUPLEARRAY:
      CONTENT: U8
      SIZE: 64
Destination:
  ENUM:
    0:
      Recipient:
        NEWTYPE:
          TYPENAME: ChainId
    1:
      Subscribers:
        NEWTYPE:
          TYPENAME: ChannelName
Effect:
  ENUM:
    0:
      System:
        NEWTYPE:
          TYPENAME: SystemEffect
    1:
      User:
        NEWTYPE: BYTES
EffectId:
  STRUCT:
    - chain_id:
        TYPENAME: ChainId
    - height:
        TYPENAME: BlockHeight
    - index: U64
Epoch:
  NEWTYPESTRUCT: U64
Event:
  STRUCT:
    - certificate_hash:
        TYPENAME: CryptoHash
    - height:
        TYPENAME: BlockHeight
    - index: U64
    - authenticated_signer:
        OPTION:
          TYPENAME: Owner
    - timestamp:
        TYPENAME: Timestamp
    - effect:
        TYPENAME: Effect
LiteCertificate:
  STRUCT:
    - value:
        TYPENAME: LiteValue
    - signatures:
        SEQ:
          TUPLE:
            - TYPENAME: ValidatorName
            - TYPENAME: Signature
LiteValue:
  STRUCT:
    - value_hash:
        TYPENAME: CryptoHash
    - chain_id:
        TYPENAME: ChainId
LiteVote:
  STRUCT:
    - value:
        TYPENAME: LiteValue
    - validator:
        TYPENAME: ValidatorName
    - signature:
        TYPENAME: Signature
Medium:
  ENUM:
    0:
      Direct: UNIT
    1:
      Channel:
        NEWTYPE:
          TYPENAME: ChannelName
Message:
  STRUCT:
    - application_id:
        TYPENAME: ApplicationId
    - origin:
        TYPENAME: Origin
    - event:
        TYPENAME: Event
MultiOwnerManagerInfo:
  STRUCT:
    - owners:
        MAP:
          KEY:
            TYPENAME: Owner
          VALUE: UNIT
    - requested_proposed:
        OPTION:
          TYPENAME: BlockProposal
    - requested_locked:
        OPTION:
          TYPENAME: Certificate
    - pending:
        OPTION:
          TYPENAME: LiteVote
    - requested_pending_value:
        OPTION:
          TYPENAME: Value
    - round:
        TYPENAME: RoundNumber
NodeError:
  ENUM:
    0:
      CryptoError:
        STRUCT:
          - error: STR
    1:
      ArithmeticError:
        STRUCT:
          - error: STR
    2:
      ViewError:
        STRUCT:
          - error: STR
    3:
      ChainError:
        STRUCT:
          - error: STR
    4:
      WorkerError:
        STRUCT:
          - error: STR
    5:
      GrpcError:
        STRUCT:
          - error: STR
    6:
      InactiveChain:
        NEWTYPE:
          TYPENAME: ChainId
    7:
      MissingCrossChainUpdate:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - application_id:
              TYPENAME: ApplicationId
          - origin:
              TYPENAME: Origin
          - height:
              TYPENAME: BlockHeight
    8:
      ApplicationBytecodeNotFound:
        STRUCT:
          - application_id:
              TYPENAME: UserApplicationId
          - bytecode_location:
              TYPENAME: BytecodeLocation
    9:
      CannotDownloadCertificates:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - target_next_block_height:
              TYPENAME: BlockHeight
    10:
      MissingVoteInValidatorResponse: UNIT
    11:
      InactiveLocalChain:
        NEWTYPE:
          TYPENAME: ChainId
    12:
      InvalidLocalBlockChaining: UNIT
    13:
      InvalidChainInfoResponse: UNIT
    14:
      ProposedBlockToInactiveChain:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - retries: U64
    15:
      ProposedBlockWithLaggingMessages:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - retries: U64
    16:
      ProposedBlockWithLaggingBytecode:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - retries: U64
    17:
      InvalidDecoding: UNIT
    18:
      UnexpectedMessage: UNIT
    19:
      ClientIoError:
        STRUCT:
          - error: STR
    20:
      CannotResolveValidatorAddress:
        STRUCT:
          - address: STR
    21:
      SubscriptionError:
        STRUCT:
          - transport: STR
    22:
      MissingCertificateValue: UNIT
Operation:
  ENUM:
    0:
      System:
        NEWTYPE:
          TYPENAME: SystemOperation
    1:
      User:
        NEWTYPE: BYTES
Origin:
  STRUCT:
    - sender:
        TYPENAME: ChainId
    - medium:
        TYPENAME: Medium
OutgoingEffect:
  STRUCT:
    - application_id:
        TYPENAME: ApplicationId
    - destination:
        TYPENAME: Destination
    - authenticated_signer:
        OPTION:
          TYPENAME: Owner
    - effect:
        TYPENAME: Effect
Owner:
  NEWTYPESTRUCT:
    TYPENAME: PublicKey
PublicKey:
  NEWTYPESTRUCT:
    TUPLEARRAY:
      CONTENT: U8
      SIZE: 32
Recipient:
  ENUM:
    0:
      Burn: UNIT
    1:
      Account:
        NEWTYPE:
          TYPENAME: Account
RoundNumber:
  NEWTYPESTRUCT: U64
RpcMessage:
  ENUM:
    0:
      BlockProposal:
        NEWTYPE:
          TYPENAME: BlockProposal
    1:
      Certificate:
        TUPLE:
          - TYPENAME: Certificate
          - SEQ:
              TYPENAME: Value
    2:
      LiteCertificate:
        NEWTYPE:
          TYPENAME: LiteCertificate
    3:
      ChainInfoQuery:
        NEWTYPE:
          TYPENAME: ChainInfoQuery
    4:
      Vote:
        NEWTYPE:
          TYPENAME: LiteVote
    5:
      ChainInfoResponse:
        NEWTYPE:
          TYPENAME: ChainInfoResponse
    6:
      Error:
        NEWTYPE:
          TYPENAME: NodeError
    7:
      CrossChainRequest:
        NEWTYPE:
          TYPENAME: CrossChainRequest
Signature:
  NEWTYPESTRUCT:
    TUPLEARRAY:
      CONTENT: U8
      SIZE: 64
SingleOwnerManagerInfo:
  STRUCT:
    - owner:
        TYPENAME: Owner
    - pending:
        OPTION:
          TYPENAME: LiteVote
    - requested_pending_value:
        OPTION:
          TYPENAME: Value
SystemChannel:
  ENUM:
    0:
      Admin: UNIT
    1:
      PublishedBytecodes: UNIT
SystemEffect:
  ENUM:
    0:
      Credit:
        STRUCT:
          - account:
              TYPENAME: Account
          - amount:
              TYPENAME: Amount
    1:
      Withdraw:
        STRUCT:
          - account:
              TYPENAME: Account
          - amount:
              TYPENAME: Amount
          - recipient:
              TYPENAME: Recipient
          - user_data:
              TYPENAME: UserData
    2:
      OpenChain:
        STRUCT:
          - id:
              TYPENAME: ChainId
          - owner:
              TYPENAME: Owner
          - admin_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
          - committees:
              MAP:
                KEY:
                  TYPENAME: Epoch
                VALUE:
                  TYPENAME: Committee
    3:
      SetCommittees:
        STRUCT:
          - admin_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
          - committees:
              MAP:
                KEY:
                  TYPENAME: Epoch
                VALUE:
                  TYPENAME: Committee
    4:
      Subscribe:
        STRUCT:
          - id:
              TYPENAME: ChainId
          - channel_id:
              TYPENAME: ChannelId
    5:
      Unsubscribe:
        STRUCT:
          - id:
              TYPENAME: ChainId
          - channel_id:
              TYPENAME: ChannelId
    6:
      BytecodePublished:
        STRUCT:
          - operation_index: U64
    7:
      BytecodeLocations:
        STRUCT:
          - locations:
              SEQ:
                TUPLE:
                  - TYPENAME: BytecodeId
                  - TYPENAME: BytecodeLocation
    8:
      RegisterApplications:
        STRUCT:
          - applications:
              SEQ:
                TYPENAME: UserApplicationDescription
    9:
      Notify:
        STRUCT:
          - id:
              TYPENAME: ChainId
SystemOperation:
  ENUM:
    0:
      Transfer:
        STRUCT:
          - owner:
              OPTION:
                TYPENAME: Owner
          - recipient:
              TYPENAME: Recipient
          - amount:
              TYPENAME: Amount
          - user_data:
              TYPENAME: UserData
    1:
      Claim:
        STRUCT:
          - owner:
              TYPENAME: Owner
          - target:
              TYPENAME: ChainId
          - recipient:
              TYPENAME: Recipient
          - amount:
              TYPENAME: Amount
          - user_data:
              TYPENAME: UserData
    2:
      OpenChain:
        STRUCT:
          - id:
              TYPENAME: ChainId
          - owner:
              TYPENAME: Owner
          - admin_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
          - committees:
              MAP:
                KEY:
                  TYPENAME: Epoch
                VALUE:
                  TYPENAME: Committee
    3:
      CloseChain: UNIT
    4:
      ChangeOwner:
        STRUCT:
          - new_owner:
              TYPENAME: Owner
    5:
      ChangeMultipleOwners:
        STRUCT:
          - new_owners:
              SEQ:
                TYPENAME: Owner
    6:
      CreateCommittee:
        STRUCT:
          - admin_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
          - committee:
              TYPENAME: Committee
    7:
      Subscribe:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - channel:
              TYPENAME: SystemChannel
    8:
      Unsubscribe:
        STRUCT:
          - chain_id:
              TYPENAME: ChainId
          - channel:
              TYPENAME: SystemChannel
    9:
      RemoveCommittee:
        STRUCT:
          - admin_id:
              TYPENAME: ChainId
          - epoch:
              TYPENAME: Epoch
    10:
      PublishBytecode:
        STRUCT:
          - contract:
              TYPENAME: Bytecode
          - service:
              TYPENAME: Bytecode
    11:
      CreateApplication:
        STRUCT:
          - bytecode_id:
              TYPENAME: BytecodeId
          - parameters: BYTES
          - initialization_argument: BYTES
          - required_application_ids:
              SEQ:
                TYPENAME: UserApplicationId
Timestamp:
  NEWTYPESTRUCT: U64
UserApplicationDescription:
  STRUCT:
    - bytecode_id:
        TYPENAME: BytecodeId
    - bytecode_location:
        TYPENAME: BytecodeLocation
    - creation:
        TYPENAME: EffectId
    - parameters: BYTES
    - required_application_ids:
        SEQ:
          TYPENAME: UserApplicationId
UserApplicationId:
  STRUCT:
    - bytecode_id:
        TYPENAME: BytecodeId
    - creation:
        TYPENAME: EffectId
UserData:
  NEWTYPESTRUCT:
    OPTION:
      TUPLEARRAY:
        CONTENT: U8
        SIZE: 32
ValidatorName:
  NEWTYPESTRUCT:
    TYPENAME: PublicKey
ValidatorState:
  STRUCT:
    - network_address: STR
    - votes: U64
Value:
  STRUCT:
    - block:
        TYPENAME: Block
    - effects:
        SEQ:
          TYPENAME: OutgoingEffect
    - state_hash:
        TYPENAME: CryptoHash
    - kind:
        TYPENAME: ValueKind
ValueKind:
  ENUM:
    0:
      ValidatedBlock:
        STRUCT:
          - round:
              TYPENAME: RoundNumber
    1:
      ConfirmedBlock: UNIT

